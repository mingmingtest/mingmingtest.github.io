(function(){"use strict";function Kt(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}function Gt(p){if(p.__esModule)return p;var a=p.default;if(typeof a=="function"){var f=function l(){return this instanceof l?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};f.prototype=a.prototype}else f={};return Object.defineProperty(f,"__esModule",{value:!0}),Object.keys(p).forEach(function(l){var c=Object.getOwnPropertyDescriptor(p,l);Object.defineProperty(f,l,c.get?c:{enumerable:!0,get:function(){return p[l]}})}),f}var yt={exports:{}},Jt={},er=Object.freeze({__proto__:null,default:Jt}),we=Gt(er);(function(p,a){var f=void 0,l=function(c){return f||(f=new Promise(function(m,g){var i=typeof c<"u"?c:{},E=i.onAbort;i.onAbort=function(e){g(new Error(e)),E&&E(e)},i.postRun=i.postRun||[],i.postRun.push(function(){m(i)}),p=void 0;var i;i||(i=typeof i<"u"?i:{}),i.onRuntimeInitialized=function(){function e(h,y){this.Qa=h,this.db=y,this.Pa=1,this.wb=[]}function t(h,y){if(this.db=y,y=he(h)+1,this.hb=Qe(y),this.hb===null)throw Error("Unable to allocate memory for the SQL string");ne(h,X,this.hb,y),this.sb=this.hb,this.eb=this.Mb=null}function r(h,{filename:y=!1}={}){y===!1?(this.filename="dbfile_"+(4294967295*Math.random()>>>0),this.Xc=!0,h!=null&&n.zb("/",this.filename,h,!0,!0)):this.filename=h,this.handleError(u(this.filename,o)),this.db=J(o,"i32"),tn(this.db),this.nb={},this.Xa={}}var o=se(4),s=i.cwrap,u=s("sqlite3_open","number",["string","number"]),d=s("sqlite3_close_v2","number",["number"]),w=s("sqlite3_exec","number",["number","string","number","number","number"]),v=s("sqlite3_changes","number",["number"]),b=s("sqlite3_prepare_v2","number",["number","string","number","number","number"]),k=s("sqlite3_sql","string",["number"]),T=s("sqlite3_normalized_sql","string",["number"]),B=s("sqlite3_prepare_v2","number",["number","number","number","number","number"]),$=s("sqlite3_bind_text","number",["number","number","number","number","number"]),z=s("sqlite3_bind_blob","number",["number","number","number","number","number"]),V=s("sqlite3_bind_double","number",["number","number","number"]),me=s("sqlite3_bind_int","number",["number","number","number"]),ae=s("sqlite3_bind_parameter_index","number",["number","string"]),bt=s("sqlite3_step","number",["number"]),j=s("sqlite3_errmsg","string",["number"]),Pr=s("sqlite3_column_count","number",["number"]),zr=s("sqlite3_data_count","number",["number"]),xr=s("sqlite3_column_double","number",["number","number"]),Br=s("sqlite3_column_text","string",["number","number"]),Lr=s("sqlite3_column_blob","number",["number","number"]),Ur=s("sqlite3_column_bytes","number",["number","number"]),Wr=s("sqlite3_column_type","number",["number","number"]),$r=s("sqlite3_column_name","string",["number","number"]),jr=s("sqlite3_reset","number",["number"]),Ir=s("sqlite3_clear_bindings","number",["number"]),Cr=s("sqlite3_finalize","number",["number"]),Vr=s("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Xr=s("sqlite3_value_type","number",["number"]),Qr=s("sqlite3_value_bytes","number",["number"]),Hr=s("sqlite3_value_text","string",["number"]),Yr=s("sqlite3_value_blob","number",["number"]),Zr=s("sqlite3_value_double","number",["number"]),Kr=s("sqlite3_result_double","",["number","number"]),Ht=s("sqlite3_result_null","",["number"]),Gr=s("sqlite3_result_text","",["number","string","number","number"]),Jr=s("sqlite3_result_blob","",["number","number","number","number"]),en=s("sqlite3_result_int","",["number","number"]),Yt=s("sqlite3_result_error","",["number","string","number"]),tn=s("RegisterExtensionFunctions","number",["number"]);e.prototype.bind=function(h){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(h)?this.vc(h):h!=null&&typeof h=="object"?this.wc(h):!0},e.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Pa=1;var h=bt(this.Qa);switch(h){case 100:return!0;case 101:return!1;default:throw this.db.handleError(h)}},e.prototype.Pc=function(h){return h==null&&(h=this.Pa,this.Pa+=1),xr(this.Qa,h)},e.prototype.Qc=function(h){return h==null&&(h=this.Pa,this.Pa+=1),Br(this.Qa,h)},e.prototype.getBlob=function(h){h==null&&(h=this.Pa,this.Pa+=1);var y=Ur(this.Qa,h);h=Lr(this.Qa,h);for(var A=new Uint8Array(y),q=0;q<y;q+=1)A[q]=U[h+q];return A},e.prototype.get=function(h){h!=null&&this.bind(h)&&this.step(),h=[];for(var y=zr(this.Qa),A=0;A<y;A+=1)switch(Wr(this.Qa,A)){case 1:case 2:h.push(this.Pc(A));break;case 3:h.push(this.Qc(A));break;case 4:h.push(this.getBlob(A));break;default:h.push(null)}return h},e.prototype.getColumnNames=function(){for(var h=[],y=Pr(this.Qa),A=0;A<y;A+=1)h.push($r(this.Qa,A));return h},e.prototype.getAsObject=function(h){h=this.get(h);for(var y=this.getColumnNames(),A={},q=0;q<y.length;q+=1)A[y[q]]=h[q];return A},e.prototype.getSQL=function(){return k(this.Qa)},e.prototype.getNormalizedSQL=function(){return T(this.Qa)},e.prototype.run=function(h){return h!=null&&this.bind(h),this.step(),this.reset()},e.prototype.zc=function(h,y){y==null&&(y=this.Pa,this.Pa+=1),h=Xe(h);var A=nt(h);this.wb.push(A),this.db.handleError($(this.Qa,y,A,h.length-1,0))},e.prototype.uc=function(h,y){y==null&&(y=this.Pa,this.Pa+=1);var A=nt(h);this.wb.push(A),this.db.handleError(z(this.Qa,y,A,h.length,0))},e.prototype.yc=function(h,y){y==null&&(y=this.Pa,this.Pa+=1),this.db.handleError((h===(h|0)?me:V)(this.Qa,y,h))},e.prototype.xc=function(h){h==null&&(h=this.Pa,this.Pa+=1),z(this.Qa,h,0,0,0)},e.prototype.Tb=function(h,y){switch(y==null&&(y=this.Pa,this.Pa+=1),typeof h){case"string":this.zc(h,y);return;case"number":case"boolean":this.yc(h+0,y);return;case"object":if(h===null){this.xc(y);return}if(h.length!=null){this.uc(h,y);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+h+")."},e.prototype.wc=function(h){var y=this;return Object.keys(h).forEach(function(A){var q=ae(y.Qa,A);q!==0&&y.Tb(h[A],q)}),!0},e.prototype.vc=function(h){for(var y=0;y<h.length;y+=1)this.Tb(h[y],y+1);return!0},e.prototype.reset=function(){return Ir(this.Qa)===0&&jr(this.Qa)===0},e.prototype.freemem=function(){for(var h;(h=this.wb.pop())!==void 0;)Oe(h)},e.prototype.free=function(){var h=Cr(this.Qa)===0;return delete this.db.nb[this.Qa],this.Qa=0,h},t.prototype.next=function(){if(this.hb===null)return{done:!0};if(this.eb!==null&&(this.eb.free(),this.eb=null),!this.db.db)throw this.Bb(),Error("Database closed");var h=Pe(),y=se(4);Ne(o),Ne(y);try{this.db.handleError(B(this.db.db,this.sb,-1,o,y)),this.sb=J(y,"i32");var A=J(o,"i32");return A===0?(this.Bb(),{done:!0}):(this.eb=new e(A,this.db),this.db.nb[A]=this.eb,{value:this.eb,done:!1})}catch(q){throw this.Mb=L(this.sb),this.Bb(),q}finally{ze(h)}},t.prototype.Bb=function(){Oe(this.hb),this.hb=null},t.prototype.getRemainingSQL=function(){return this.Mb!==null?this.Mb:L(this.sb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(t.prototype[Symbol.iterator]=function(){return this}),r.prototype.run=function(h,y){if(!this.db)throw"Database closed";if(y){h=this.prepare(h,y);try{h.step()}finally{h.free()}}else this.handleError(w(this.db,h,0,0,o));return this},r.prototype.exec=function(h,y){if(!this.db)throw"Database closed";var A=Pe(),q=null;try{var M=he(h)+1,K=se(M);ne(h,U,K,M);var I=K,ke=se(4);for(h=[];J(I,"i8")!==0;){Ne(o),Ne(ke),this.handleError(B(this.db,I,-1,o,ke));var Ae=J(o,"i32");if(I=J(ke,"i32"),Ae!==0){for(M=null,q=new e(Ae,this),y!=null&&q.bind(y);q.step();)M===null&&(M={columns:q.getColumnNames(),values:[]},h.push(M)),M.values.push(q.get());q.free()}}return h}catch(C){throw q&&q.free(),C}finally{ze(A)}},r.prototype.each=function(h,y,A,q){typeof y=="function"&&(q=A,A=y,y=void 0),h=this.prepare(h,y);try{for(;h.step();)A(h.getAsObject())}finally{h.free()}if(typeof q=="function")return q()},r.prototype.prepare=function(h,y){if(Ne(o),this.handleError(b(this.db,h,-1,o,0)),h=J(o,"i32"),h===0)throw"Nothing to prepare";var A=new e(h,this);return y!=null&&A.bind(y),this.nb[h]=A},r.prototype.iterateStatements=function(h){return new t(h,this)},r.prototype.export=function(){Object.values(this.nb).forEach(function(y){y.free()}),Object.values(this.Xa).forEach(et),this.Xa={},this.handleError(d(this.db));var h=n.readFile(this.filename,{encoding:"binary"});return this.handleError(u(this.filename,o)),this.db=J(o,"i32"),h},r.prototype.close=function(){this.db!==null&&(Object.values(this.nb).forEach(function(h){h.free()}),Object.values(this.Xa).forEach(et),this.Xa={},this.handleError(d(this.db)),this.Xc&&n.unlink("/"+this.filename),this.db=null)},r.prototype.handleError=function(h){if(h===0)return null;throw h=j(this.db),Error(h)},r.prototype.getRowsModified=function(){return v(this.db)},r.prototype.create_function=function(h,y){Object.prototype.hasOwnProperty.call(this.Xa,h)&&(et(this.Xa[h]),delete this.Xa[h]);var A=We(function(q,M,K){for(var I,ke=[],Ae=0;Ae<M;Ae+=1){var C=J(K+4*Ae,"i32"),ee=Xr(C);if(ee===1||ee===2)C=Zr(C);else if(ee===3)C=Hr(C);else if(ee===4){ee=C,C=Qr(ee),ee=Yr(ee);for(var Zt=new Uint8Array(C),Ye=0;Ye<C;Ye+=1)Zt[Ye]=U[ee+Ye];C=Zt}else C=null;ke.push(C)}try{I=y.apply(null,ke)}catch(rn){Yt(q,rn,-1);return}switch(typeof I){case"boolean":en(q,I?1:0);break;case"number":Kr(q,I);break;case"string":Gr(q,I,-1,-1);break;case"object":I===null?Ht(q):I.length!=null?(M=nt(I),Jr(q,M,I.length,-1),Oe(M)):Yt(q,"Wrong API use : tried to return a value of an unknown type ("+I+").",-1);break;default:Ht(q)}},"viii");return this.Xa[h]=A,this.handleError(Vr(this.db,h,y.length,1,0,A,0,0,0)),this},i.Database=r;var xe=new Map;i.register_for_idb=h=>{let y=We(function(M,K){return M=xe.get(M),h.lock(M,K)?0:5},"iii"),A=We(function(M,K){return M=xe.get(M),h.unlock(M,K),0},"iii"),q=We(function(M,K){M=L(M),xe.set(K,M)},"vii");i._register_for_idb(y,A,q)},i.cleanup_file=h=>{let y=[...xe.entries()].find(A=>A[1]===h);xe.delete(y[0])},i.reset_filesystem=()=>{n.root=null,n.lc()}};var R={},O;for(O in i)i.hasOwnProperty(O)&&(R[O]=i[O]);var F="./this.program",x=typeof window=="object",P=typeof importScripts=="function",re=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Y="",Te,Re,Le,fe,ye;re?(Y=P?we.dirname(Y)+"/":__dirname+"/",Te=function(e,t){return fe||(fe=we),ye||(ye=we),e=ye.normalize(e),fe.readFileSync(e,t?null:"utf8")},Le=function(e){return e=Te(e,!0),e.buffer||(e=new Uint8Array(e)),rt(e.buffer),e},Re=function(e,t,r){fe||(fe=we),ye||(ye=we),e=ye.normalize(e),fe.readFile(e,function(o,s){o?r(o):t(s.buffer)})},1<process.argv.length&&(F=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),p.exports=i,i.inspect=function(){return"[Emscripten Module object]"}):(x||P)&&(P?Y=self.location.href:typeof document<"u"&&document.currentScript&&(Y=document.currentScript.src),Y=Y.indexOf("blob:")!==0?Y.substr(0,Y.lastIndexOf("/")+1):"",Te=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},P&&(Le=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Re=function(e,t,r){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=function(){o.status==200||o.status==0&&o.response?t(o.response):r()},o.onerror=r,o.send(null)});var Ue=i.print||console.log.bind(console),W=i.printErr||console.warn.bind(console);for(O in R)R.hasOwnProperty(O)&&(i[O]=R[O]);R=null,i.thisProgram&&(F=i.thisProgram);var Je=[],ce;function et(e){ce.delete(Z.get(e)),Je.push(e)}function We(e,t){if(!ce){ce=new WeakMap;for(var r=0;r<Z.length;r++){var o=Z.get(r);o&&ce.set(o,r)}}if(ce.has(e))e=ce.get(e);else{if(Je.length)r=Je.pop();else{try{Z.grow(1)}catch(w){throw w instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":w}r=Z.length-1}try{Z.set(r,e)}catch(w){if(!(w instanceof TypeError))throw w;if(typeof WebAssembly.Function=="function"){var s={i:"i32",j:"i64",f:"f32",d:"f64"},u={parameters:[],results:t[0]=="v"?[]:[s[t[0]]]};for(o=1;o<t.length;++o)u.parameters.push(s[t[o]]);t=new WebAssembly.Function(u,e)}else{s=[1,0,1,96],u=t.slice(0,1),t=t.slice(1);var d={i:127,j:126,f:125,d:124};for(s.push(t.length),o=0;o<t.length;++o)s.push(d[t[o]]);u=="v"?s.push(0):s=s.concat([1,d[u]]),s[1]=s.length-2,t=new Uint8Array([0,97,115,109,1,0,0,0].concat(s,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),t=new WebAssembly.Module(t),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}Z.set(r,t)}ce.set(e,r),e=r}return e}var Fe;i.wasmBinary&&(Fe=i.wasmBinary),i.noExitRuntime,typeof WebAssembly!="object"&&D("no native wasm support detected");function Ne(e){var t="i32";switch(t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":U[e>>0]=0;break;case"i8":U[e>>0]=0;break;case"i16":$e[e>>1]=0;break;case"i32":_[e>>2]=0;break;case"i64":H=[0,(N=0,1<=+Math.abs(N)?0<N?(Math.min(+Math.floor(N/4294967296),4294967295)|0)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],_[e>>2]=H[0],_[e+4>>2]=H[1];break;case"float":it[e>>2]=0;break;case"double":st[e>>3]=0;break;default:D("invalid type for setValue: "+t)}}function J(e,t){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return U[e>>0];case"i8":return U[e>>0];case"i16":return $e[e>>1];case"i32":return _[e>>2];case"i64":return _[e>>2];case"float":return it[e>>2];case"double":return st[e>>3];default:D("invalid type for getValue: "+t)}return null}var tt,Dt=!1;function rt(e,t){e||D("Assertion failed: "+t)}function Tt(e){var t=i["_"+e];return rt(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function vr(e,t,r,o){var s={string:function(b){var k=0;if(b!=null&&b!==0){var T=(b.length<<2)+1;k=se(T),ne(b,X,k,T)}return k},array:function(b){var k=se(b.length);return U.set(b,k),k}},u=Tt(e),d=[];if(e=0,o)for(var w=0;w<o.length;w++){var v=s[r[w]];v?(e===0&&(e=Pe()),d[w]=v(o[w])):d[w]=o[w]}return r=u.apply(null,d),r=function(b){return t==="string"?L(b):t==="boolean"?!!b:b}(r),e!==0&&ze(e),r}function nt(e){var t=Qe(e.length);return e.subarray||e.slice?X.set(e,t):X.set(new Uint8Array(e),t),t}var Rt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ge(e,t,r){var o=t+r;for(r=t;e[r]&&!(r>=o);)++r;if(16<r-t&&e.subarray&&Rt)return Rt.decode(e.subarray(t,r));for(o="";t<r;){var s=e[t++];if(s&128){var u=e[t++]&63;if((s&224)==192)o+=String.fromCharCode((s&31)<<6|u);else{var d=e[t++]&63;s=(s&240)==224?(s&15)<<12|u<<6|d:(s&7)<<18|u<<12|d<<6|e[t++]&63,65536>s?o+=String.fromCharCode(s):(s-=65536,o+=String.fromCharCode(55296|s>>10,56320|s&1023))}}else o+=String.fromCharCode(s)}return o}function L(e,t){return e?ge(X,e,t):""}function ne(e,t,r,o){if(!(0<o))return 0;var s=r;o=r+o-1;for(var u=0;u<e.length;++u){var d=e.charCodeAt(u);if(55296<=d&&57343>=d){var w=e.charCodeAt(++u);d=65536+((d&1023)<<10)|w&1023}if(127>=d){if(r>=o)break;t[r++]=d}else{if(2047>=d){if(r+1>=o)break;t[r++]=192|d>>6}else{if(65535>=d){if(r+2>=o)break;t[r++]=224|d>>12}else{if(r+3>=o)break;t[r++]=240|d>>18,t[r++]=128|d>>12&63}t[r++]=128|d>>6&63}t[r++]=128|d&63}}return t[r]=0,r-s}function he(e){for(var t=0,r=0;r<e.length;++r){var o=e.charCodeAt(r);55296<=o&&57343>=o&&(o=65536+((o&1023)<<10)|e.charCodeAt(++r)&1023),127>=o?++t:t=2047>=o?t+2:65535>=o?t+3:t+4}return t}function Ft(e){var t=he(e)+1,r=Qe(t);return r&&ne(e,U,r,t),r}var ot,U,X,$e,_,it,st;function Nt(){var e=tt.buffer;ot=e,i.HEAP8=U=new Int8Array(e),i.HEAP16=$e=new Int16Array(e),i.HEAP32=_=new Int32Array(e),i.HEAPU8=X=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=new Uint32Array(e),i.HEAPF32=it=new Float32Array(e),i.HEAPF64=st=new Float64Array(e)}var Z,Mt=[],Ot=[],Pt=[];function kr(){var e=i.preRun.shift();Mt.unshift(e)}var de=0,Me=null;function at(){de++,i.monitorRunDependencies&&i.monitorRunDependencies(de)}function je(){if(de--,i.monitorRunDependencies&&i.monitorRunDependencies(de),de==0&&Me){var e=Me;Me=null,e()}}i.preloadedImages={},i.preloadedAudios={};function D(e){throw i.onAbort&&i.onAbort(e),W(e),Dt=!0,new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info.")}function zt(){return Q.startsWith("data:application/octet-stream;base64,")}var Q;if(Q="sql-wasm.wasm",!zt()){var xt=Q;Q=i.locateFile?i.locateFile(xt,Y):Y+xt}function Bt(){var e=Q;try{if(e==Q&&Fe)return new Uint8Array(Fe);if(Le)return Le(e);throw"both async and sync fetching of the wasm failed"}catch(t){D(t)}}function Ar(){if(!Fe&&(x||P)){if(typeof fetch=="function"&&!Q.startsWith("file://"))return fetch(Q,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Q+"'";return e.arrayBuffer()}).catch(function(){return Bt()});if(Re)return new Promise(function(e,t){Re(Q,function(r){e(new Uint8Array(r))},t)})}return Promise.resolve().then(function(){return Bt()})}var N,H;function ut(e){for(;0<e.length;){var t=e.shift();if(typeof t=="function")t(i);else{var r=t.pd;typeof r=="number"?t.yb===void 0?Z.get(r)():Z.get(r)(t.yb):r(t.yb===void 0?null:t.yb)}}}function Sr(e){return e.replace(/\b_Z[\w\d_]+/g,function(t){return t===t?t:t+" ["+t+"]"})}function qr(){function e(d){return(d=d.toTimeString().match(/\(([A-Za-z ]+)\)$/))?d[1]:"GMT"}if(!Lt){Lt=!0;var t=new Date().getFullYear(),r=new Date(t,0,1),o=new Date(t,6,1);t=r.getTimezoneOffset();var s=o.getTimezoneOffset(),u=Math.max(t,s);_[Xt()>>2]=60*u,_[Vt()>>2]=+(t!=s),r=e(r),o=e(o),r=Ft(r),o=Ft(o),s<t?(_[ve()>>2]=r,_[ve()+4>>2]=o):(_[ve()>>2]=o,_[ve()+4>>2]=r)}}var Lt;function lt(e,t){for(var r=0,o=e.length-1;0<=o;o--){var s=e[o];s==="."?e.splice(o,1):s===".."?(e.splice(o,1),r++):r&&(e.splice(o,1),r--)}if(t)for(;r;r--)e.unshift("..");return e}function _e(e){var t=e.charAt(0)==="/",r=e.substr(-1)==="/";return(e=lt(e.split("/").filter(function(o){return!!o}),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e}function Ie(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.substr(0,t.length-1)),e+t)}function oe(e){if(e==="/")return"/";e=_e(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)}function Ee(e,t){return _e(e+"/"+t)}function Dr(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}if(re)try{var t=we;return function(){return t.randomBytes(1)[0]}}catch{}return function(){D("randomDevice")}}function pe(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){if(t=0<=r?arguments[r]:n.cwd(),typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t=t.charAt(0)==="/"}return e=lt(e.split("/").filter(function(o){return!!o}),!t).join("/"),(t?"/":"")+e||"."}function Ut(e,t){function r(d){for(var w=0;w<d.length&&d[w]==="";w++);for(var v=d.length-1;0<=v&&d[v]==="";v--);return w>v?[]:d.slice(w,v-w+1)}e=pe(e).substr(1),t=pe(t).substr(1),e=r(e.split("/")),t=r(t.split("/"));for(var o=Math.min(e.length,t.length),s=o,u=0;u<o;u++)if(e[u]!==t[u]){s=u;break}for(o=[],u=s;u<e.length;u++)o.push("..");return o=o.concat(t.slice(s)),o.join("/")}var Wt=[];function $t(e,t){Wt[e]={input:[],output:[],gb:t},n.Qb(e,Tr)}var Tr={open:function(e){var t=Wt[e.node.rdev];if(!t)throw new n.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.gb.flush(e.tty)},flush:function(e){e.tty.gb.flush(e.tty)},read:function(e,t,r,o){if(!e.tty||!e.tty.gb.cc)throw new n.ErrnoError(60);for(var s=0,u=0;u<o;u++){try{var d=e.tty.gb.cc(e.tty)}catch{throw new n.ErrnoError(29)}if(d===void 0&&s===0)throw new n.ErrnoError(6);if(d==null)break;s++,t[r+u]=d}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,r,o){if(!e.tty||!e.tty.gb.Nb)throw new n.ErrnoError(60);try{for(var s=0;s<o;s++)e.tty.gb.Nb(e.tty,t[r+s])}catch{throw new n.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),s}},Rr={cc:function(e){if(!e.input.length){var t=null;if(re){var r=Buffer.alloc(256),o=0;try{o=fe.readSync(process.stdin.fd,r,0,256,null)}catch(s){if(s.toString().includes("EOF"))o=0;else throw s}0<o?t=r.slice(0,o).toString("utf-8"):t=null}else typeof window<"u"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t!==null&&(t+=`
`));if(!t)return null;e.input=Xe(t,!0)}return e.input.shift()},Nb:function(e,t){t===null||t===10?(Ue(ge(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(Ue(ge(e.output,0)),e.output=[])}},Fr={Nb:function(e,t){t===null||t===10?(W(ge(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(W(ge(e.output,0)),e.output=[])}};function jt(e){e=65536*Math.ceil(e/65536);var t=Qt(65536,e);return t?(X.fill(0,t,t+e),t):0}var S={Va:null,mount:function(){return S.createNode(null,"/",16895,0)},createNode:function(e,t,r,o){if(n.Rc(r)||n.isFIFO(r))throw new n.ErrnoError(63);return S.Va||(S.Va={dir:{node:{getattr:S.node_ops.getattr,setattr:S.node_ops.setattr,lookup:S.node_ops.lookup,mknod:S.node_ops.mknod,rename:S.node_ops.rename,unlink:S.node_ops.unlink,rmdir:S.node_ops.rmdir,readdir:S.node_ops.readdir,symlink:S.node_ops.symlink},stream:{llseek:S.stream_ops.llseek}},file:{node:{getattr:S.node_ops.getattr,setattr:S.node_ops.setattr},stream:{llseek:S.stream_ops.llseek,read:S.stream_ops.read,write:S.stream_ops.write,allocate:S.stream_ops.allocate,mmap:S.stream_ops.mmap,msync:S.stream_ops.msync}},link:{node:{getattr:S.node_ops.getattr,setattr:S.node_ops.setattr,readlink:S.node_ops.readlink},stream:{}},Vb:{node:{getattr:S.node_ops.getattr,setattr:S.node_ops.setattr},stream:n.Cc}}),r=n.createNode(e,t,r,o),n.isDir(r.mode)?(r.node_ops=S.Va.dir.node,r.stream_ops=S.Va.dir.stream,r.Na={}):n.isFile(r.mode)?(r.node_ops=S.Va.file.node,r.stream_ops=S.Va.file.stream,r.Ra=0,r.Na=null):n.fb(r.mode)?(r.node_ops=S.Va.link.node,r.stream_ops=S.Va.link.stream):n.pb(r.mode)&&(r.node_ops=S.Va.Vb.node,r.stream_ops=S.Va.Vb.stream),r.timestamp=Date.now(),e&&(e.Na[t]=r,e.timestamp=r.timestamp),r},qd:function(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},Zb:function(e,t){var r=e.Na?e.Na.length:0;r>=t||(t=Math.max(t,r*(1048576>r?2:1.125)>>>0),r!=0&&(t=Math.max(t,256)),r=e.Na,e.Na=new Uint8Array(t),0<e.Ra&&e.Na.set(r.subarray(0,e.Ra),0))},gd:function(e,t){if(e.Ra!=t)if(t==0)e.Na=null,e.Ra=0;else{var r=e.Na;e.Na=new Uint8Array(t),r&&e.Na.set(r.subarray(0,Math.min(t,e.Ra))),e.Ra=t}},node_ops:{getattr:function(e){var t={};return t.dev=n.pb(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,n.isDir(e.mode)?t.size=4096:n.isFile(e.mode)?t.size=e.Ra:n.fb(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.Ac=4096,t.blocks=Math.ceil(t.size/t.Ac),t},setattr:function(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&S.gd(e,t.size)},lookup:function(){throw n.Db[44]},mknod:function(e,t,r,o){return S.createNode(e,t,r,o)},rename:function(e,t,r){if(n.isDir(e.mode)){try{var o=n.lookupNode(t,r)}catch{}if(o)for(var s in o.Na)throw new n.ErrnoError(55)}delete e.parent.Na[e.name],e.parent.timestamp=Date.now(),e.name=r,t.Na[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.Na[t],e.timestamp=Date.now()},rmdir:function(e,t){var r=n.lookupNode(e,t),o;for(o in r.Na)throw new n.ErrnoError(55);delete e.Na[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."],r;for(r in e.Na)e.Na.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){return e=S.createNode(e,t,41471,0),e.link=r,e},readlink:function(e){if(!n.fb(e.mode))throw new n.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,r,o,s){var u=e.node.Na;if(s>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-s,o),8<e&&u.subarray)t.set(u.subarray(s,s+e),r);else for(o=0;o<e;o++)t[r+o]=u[s+o];return e},write:function(e,t,r,o,s,u){if(t.buffer===U.buffer&&(u=!1),!o)return 0;if(e=e.node,e.timestamp=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(u)return e.Na=t.subarray(r,r+o),e.Ra=o;if(e.Ra===0&&s===0)return e.Na=t.slice(r,r+o),e.Ra=o;if(s+o<=e.Ra)return e.Na.set(t.subarray(r,r+o),s),o}if(S.Zb(e,s+o),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(r,r+o),s);else for(u=0;u<o;u++)e.Na[s+u]=t[r+u];return e.Ra=Math.max(e.Ra,s+o),o},llseek:function(e,t,r){if(r===1?t+=e.position:r===2&&n.isFile(e.node.mode)&&(t+=e.node.Ra),0>t)throw new n.ErrnoError(28);return t},allocate:function(e,t,r){S.Zb(e.node,t+r),e.node.Ra=Math.max(e.node.Ra,t+r)},mmap:function(e,t,r,o,s,u){if(t!==0)throw new n.ErrnoError(28);if(!n.isFile(e.node.mode))throw new n.ErrnoError(43);if(e=e.node.Na,u&2||e.buffer!==ot){if((0<o||o+r<e.length)&&(e.subarray?e=e.subarray(o,o+r):e=Array.prototype.slice.call(e,o,o+r)),o=!0,r=jt(r),!r)throw new n.ErrnoError(48);U.set(e,r)}else o=!1,r=e.byteOffset;return{ed:r,vb:o}},msync:function(e,t,r,o,s){if(!n.isFile(e.node.mode))throw new n.ErrnoError(43);return s&2||S.stream_ops.write(e,t,0,o,r,!1),0}}};function Nr(e,t,r){var o="al "+e;Re(e,function(s){rt(s,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(s)),o&&je()},function(){if(r)r();else throw'Loading data file "'+e+'" failed.'}),o&&at()}var n={root:null,mb:[],Xb:{},streams:[],Zc:1,Ua:null,Wb:"/",Hb:!1,hc:!0,Sa:{},nc:{kc:{qc:1,rc:2}},ErrnoError:null,Db:{},Lc:null,tb:0,lookupPath:function(e,t){if(e=pe(n.cwd(),e),t=t||{},!e)return{path:"",node:null};var r={Cb:!0,Pb:0},o;for(o in r)t[o]===void 0&&(t[o]=r[o]);if(8<t.Pb)throw new n.ErrnoError(32);e=lt(e.split("/").filter(function(d){return!!d}),!1);var s=n.root;for(r="/",o=0;o<e.length;o++){var u=o===e.length-1;if(u&&t.parent)break;if(s=n.lookupNode(s,e[o]),r=Ee(r,e[o]),n.ab(s)&&(!u||u&&t.Cb)&&(s=s.lb.root),!u||t.Ta){for(u=0;n.fb(s.mode);)if(s=n.readlink(r),r=pe(Ie(r),s),s=n.lookupPath(r,{Pb:t.Pb}).node,40<u++)throw new n.ErrnoError(32)}}return{path:r,node:s}},Ya:function(e){for(var t;;){if(n.isRoot(e))return e=e.mount.jc,t?e[e.length-1]!=="/"?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}},Gb:function(e,t){for(var r=0,o=0;o<t.length;o++)r=(r<<5)-r+t.charCodeAt(o)|0;return(e+r>>>0)%n.Ua.length},ec:function(e){var t=n.Gb(e.parent.id,e.name);e.cb=n.Ua[t],n.Ua[t]=e},fc:function(e){var t=n.Gb(e.parent.id,e.name);if(n.Ua[t]===e)n.Ua[t]=e.cb;else for(t=n.Ua[t];t;){if(t.cb===e){t.cb=e.cb;break}t=t.cb}},lookupNode:function(e,t){var r=n.Vc(e);if(r)throw new n.ErrnoError(r,e);for(r=n.Ua[n.Gb(e.id,t)];r;r=r.cb){var o=r.name;if(r.parent.id===e.id&&o===t)return r}return n.lookup(e,t)},createNode:function(e,t,r,o){return e=new n.FSNode(e,t,r,o),n.ec(e),e},Ab:function(e){n.fc(e)},isRoot:function(e){return e===e.parent},ab:function(e){return!!e.lb},isFile:function(e){return(e&61440)===32768},isDir:function(e){return(e&61440)===16384},fb:function(e){return(e&61440)===40960},pb:function(e){return(e&61440)===8192},Rc:function(e){return(e&61440)===24576},isFIFO:function(e){return(e&61440)===4096},isSocket:function(e){return(e&49152)===49152},Mc:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Yc:function(e){var t=n.Mc[e];if(typeof t>"u")throw Error("Unknown file open mode: "+e);return t},$b:function(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},Za:function(e,t){if(n.hc)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0},Vc:function(e){var t=n.Za(e,"x");return t||(e.node_ops.lookup?0:2)},Lb:function(e,t){try{return n.lookupNode(e,t),20}catch{}return n.Za(e,"wx")},qb:function(e,t,r){try{var o=n.lookupNode(e,t)}catch(s){return s.Oa}if(e=n.Za(e,"wx"))return e;if(r){if(!n.isDir(o.mode))return 54;if(n.isRoot(o)||n.Ya(o)===n.cwd())return 10}else if(n.isDir(o.mode))return 31;return 0},Wc:function(e,t){return e?n.fb(e.mode)?32:n.isDir(e.mode)&&(n.$b(t)!=="r"||t&512)?31:n.Za(e,n.$b(t)):44},oc:4096,$c:function(e,t){for(t=t||n.oc,e=e||0;e<=t;e++)if(!n.streams[e])return e;throw new n.ErrnoError(33)},$a:function(e){return n.streams[e]},Jc:function(e,t,r){n.ub||(n.ub=function(){},n.ub.prototype={object:{get:function(){return this.node},set:function(u){this.node=u}}});var o=new n.ub,s;for(s in e)o[s]=e[s];return e=o,t=n.$c(t,r),e.fd=t,n.streams[t]=e},Dc:function(e){n.streams[e]=null},Cc:{open:function(e){e.stream_ops=n.Oc(e.node.rdev).stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new n.ErrnoError(70)}},Kb:function(e){return e>>8},sd:function(e){return e&255},bb:function(e,t){return e<<8|t},Qb:function(e,t){n.Xb[e]={stream_ops:t}},Oc:function(e){return n.Xb[e]},bc:function(e){var t=[];for(e=[e];e.length;){var r=e.pop();t.push(r),e.push.apply(e,r.mb)}return t},mc:function(e,t){function r(d){return n.tb--,t(d)}function o(d){if(d){if(!o.Kc)return o.Kc=!0,r(d)}else++u>=s.length&&r(null)}typeof e=="function"&&(t=e,e=!1),n.tb++,1<n.tb&&W("warning: "+n.tb+" FS.syncfs operations in flight at once, probably just doing extra work");var s=n.bc(n.root.mount),u=0;s.forEach(function(d){if(!d.type.mc)return o(null);d.type.mc(d,e,o)})},mount:function(e,t,r){var o=r==="/",s=!r;if(o&&n.root)throw new n.ErrnoError(10);if(!o&&!s){var u=n.lookupPath(r,{Cb:!1});if(r=u.path,u=u.node,n.ab(u))throw new n.ErrnoError(10);if(!n.isDir(u.mode))throw new n.ErrnoError(54)}return t={type:e,vd:t,jc:r,mb:[]},e=e.mount(t),e.mount=t,t.root=e,o?n.root=e:u&&(u.lb=t,u.mount&&u.mount.mb.push(t)),e},yd:function(e){if(e=n.lookupPath(e,{Cb:!1}),!n.ab(e.node))throw new n.ErrnoError(28);e=e.node;var t=e.lb,r=n.bc(t);Object.keys(n.Ua).forEach(function(o){for(o=n.Ua[o];o;){var s=o.cb;r.includes(o.mount)&&n.Ab(o),o=s}}),e.lb=null,e.mount.mb.splice(e.mount.mb.indexOf(t),1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,r){var o=n.lookupPath(e,{parent:!0}).node;if(e=oe(e),!e||e==="."||e==="..")throw new n.ErrnoError(28);var s=n.Lb(o,e);if(s)throw new n.ErrnoError(s);if(!o.node_ops.mknod)throw new n.ErrnoError(63);return o.node_ops.mknod(o,e,t,r)},create:function(e,t){return n.mknod(e,(t!==void 0?t:438)&4095|32768,0)},mkdir:function(e,t){return n.mknod(e,(t!==void 0?t:511)&1023|16384,0)},td:function(e,t){e=e.split("/");for(var r="",o=0;o<e.length;++o)if(e[o]){r+="/"+e[o];try{n.mkdir(r,t)}catch(s){if(s.Oa!=20)throw s}}},rb:function(e,t,r){return typeof r>"u"&&(r=t,t=438),n.mknod(e,t|8192,r)},symlink:function(e,t){if(!pe(e))throw new n.ErrnoError(44);var r=n.lookupPath(t,{parent:!0}).node;if(!r)throw new n.ErrnoError(44);t=oe(t);var o=n.Lb(r,t);if(o)throw new n.ErrnoError(o);if(!r.node_ops.symlink)throw new n.ErrnoError(63);return r.node_ops.symlink(r,t,e)},rename:function(e,t){var r=Ie(e),o=Ie(t),s=oe(e),u=oe(t),d=n.lookupPath(e,{parent:!0}),w=d.node;if(d=n.lookupPath(t,{parent:!0}),d=d.node,!w||!d)throw new n.ErrnoError(44);if(w.mount!==d.mount)throw new n.ErrnoError(75);var v=n.lookupNode(w,s);if(o=Ut(e,o),o.charAt(0)!==".")throw new n.ErrnoError(28);if(o=Ut(t,r),o.charAt(0)!==".")throw new n.ErrnoError(55);try{var b=n.lookupNode(d,u)}catch{}if(v!==b){if(r=n.isDir(v.mode),s=n.qb(w,s,r))throw new n.ErrnoError(s);if(s=b?n.qb(d,u,r):n.Lb(d,u))throw new n.ErrnoError(s);if(!w.node_ops.rename)throw new n.ErrnoError(63);if(n.ab(v)||b&&n.ab(b))throw new n.ErrnoError(10);if(d!==w&&(s=n.Za(w,"w")))throw new n.ErrnoError(s);try{n.Sa.willMovePath&&n.Sa.willMovePath(e,t)}catch(k){W("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+k.message)}n.fc(v);try{w.node_ops.rename(v,d,u)}catch(k){throw k}finally{n.ec(v)}try{n.Sa.onMovePath&&n.Sa.onMovePath(e,t)}catch(k){W("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+k.message)}}},rmdir:function(e){var t=n.lookupPath(e,{parent:!0}).node,r=oe(e),o=n.lookupNode(t,r),s=n.qb(t,r,!0);if(s)throw new n.ErrnoError(s);if(!t.node_ops.rmdir)throw new n.ErrnoError(63);if(n.ab(o))throw new n.ErrnoError(10);try{n.Sa.willDeletePath&&n.Sa.willDeletePath(e)}catch(u){W("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+u.message)}t.node_ops.rmdir(t,r),n.Ab(o);try{n.Sa.onDeletePath&&n.Sa.onDeletePath(e)}catch(u){W("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+u.message)}},readdir:function(e){if(e=n.lookupPath(e,{Ta:!0}).node,!e.node_ops.readdir)throw new n.ErrnoError(54);return e.node_ops.readdir(e)},unlink:function(e){var t=n.lookupPath(e,{parent:!0}).node,r=oe(e),o=n.lookupNode(t,r),s=n.qb(t,r,!1);if(s)throw new n.ErrnoError(s);if(!t.node_ops.unlink)throw new n.ErrnoError(63);if(n.ab(o))throw new n.ErrnoError(10);try{n.Sa.willDeletePath&&n.Sa.willDeletePath(e)}catch(u){W("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+u.message)}t.node_ops.unlink(t,r),n.Ab(o);try{n.Sa.onDeletePath&&n.Sa.onDeletePath(e)}catch(u){W("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+u.message)}},readlink:function(e){if(e=n.lookupPath(e).node,!e)throw new n.ErrnoError(44);if(!e.node_ops.readlink)throw new n.ErrnoError(28);return pe(n.Ya(e.parent),e.node_ops.readlink(e))},stat:function(e,t){if(e=n.lookupPath(e,{Ta:!t}).node,!e)throw new n.ErrnoError(44);if(!e.node_ops.getattr)throw new n.ErrnoError(63);return e.node_ops.getattr(e)},lstat:function(e){return n.stat(e,!0)},chmod:function(e,t,r){if(e=typeof e=="string"?n.lookupPath(e,{Ta:!r}).node:e,!e.node_ops.setattr)throw new n.ErrnoError(63);e.node_ops.setattr(e,{mode:t&4095|e.mode&-4096,timestamp:Date.now()})},lchmod:function(e,t){n.chmod(e,t,!0)},fchmod:function(e,t){if(e=n.$a(e),!e)throw new n.ErrnoError(8);n.chmod(e.node,t)},chown:function(e,t,r,o){if(e=typeof e=="string"?n.lookupPath(e,{Ta:!o}).node:e,!e.node_ops.setattr)throw new n.ErrnoError(63);e.node_ops.setattr(e,{timestamp:Date.now()})},lchown:function(e,t,r){n.chown(e,t,r,!0)},fchown:function(e,t,r){if(e=n.$a(e),!e)throw new n.ErrnoError(8);n.chown(e.node,t,r)},truncate:function(e,t){if(0>t)throw new n.ErrnoError(28);if(e=typeof e=="string"?n.lookupPath(e,{Ta:!0}).node:e,!e.node_ops.setattr)throw new n.ErrnoError(63);if(n.isDir(e.mode))throw new n.ErrnoError(31);if(!n.isFile(e.mode))throw new n.ErrnoError(28);var r=n.Za(e,"w");if(r)throw new n.ErrnoError(r);e.node_ops.setattr(e,{size:t,timestamp:Date.now()})},Nc:function(e,t){if(e=n.$a(e),!e)throw new n.ErrnoError(8);if(!(e.flags&2097155))throw new n.ErrnoError(28);n.truncate(e.node,t)},kd:function(e,t,r){e=n.lookupPath(e,{Ta:!0}).node,e.node_ops.setattr(e,{timestamp:Math.max(t,r)})},open:function(e,t,r,o,s){if(e==="")throw new n.ErrnoError(44);if(t=typeof t=="string"?n.Yc(t):t,r=t&64?(typeof r>"u"?438:r)&4095|32768:0,typeof e=="object")var u=e;else{e=_e(e);try{u=n.lookupPath(e,{Ta:!(t&131072)}).node}catch{}}var d=!1;if(t&64)if(u){if(t&128)throw new n.ErrnoError(20)}else u=n.mknod(e,r,0),d=!0;if(!u)throw new n.ErrnoError(44);if(n.pb(u.mode)&&(t&=-513),t&65536&&!n.isDir(u.mode))throw new n.ErrnoError(54);if(!d&&(r=n.Wc(u,t)))throw new n.ErrnoError(r);t&512&&n.truncate(u,0),t&=-131713,o=n.Jc({node:u,path:n.Ya(u),flags:t,seekable:!0,position:0,stream_ops:u.stream_ops,jd:[],error:!1},o,s),o.stream_ops.open&&o.stream_ops.open(o),!i.logReadFiles||t&1||(n.Ob||(n.Ob={}),e in n.Ob||(n.Ob[e]=1,W("FS.trackingDelegate error on read file: "+e)));try{n.Sa.onOpenFile&&(s=0,(t&2097155)!==1&&(s|=n.nc.kc.qc),t&2097155&&(s|=n.nc.kc.rc),n.Sa.onOpenFile(e,s))}catch(w){W("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+w.message)}return o},close:function(e){if(n.kb(e))throw new n.ErrnoError(8);e.Fb&&(e.Fb=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{n.Dc(e.fd)}e.fd=null},kb:function(e){return e.fd===null},llseek:function(e,t,r){if(n.kb(e))throw new n.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new n.ErrnoError(70);if(r!=0&&r!=1&&r!=2)throw new n.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.jd=[],e.position},read:function(e,t,r,o,s){if(0>o||0>s)throw new n.ErrnoError(28);if(n.kb(e))throw new n.ErrnoError(8);if((e.flags&2097155)===1)throw new n.ErrnoError(8);if(n.isDir(e.node.mode))throw new n.ErrnoError(31);if(!e.stream_ops.read)throw new n.ErrnoError(28);var u=typeof s<"u";if(!u)s=e.position;else if(!e.seekable)throw new n.ErrnoError(70);return t=e.stream_ops.read(e,t,r,o,s),u||(e.position+=t),t},write:function(e,t,r,o,s,u){if(0>o||0>s)throw new n.ErrnoError(28);if(n.kb(e))throw new n.ErrnoError(8);if(!(e.flags&2097155))throw new n.ErrnoError(8);if(n.isDir(e.node.mode))throw new n.ErrnoError(31);if(!e.stream_ops.write)throw new n.ErrnoError(28);e.seekable&&e.flags&1024&&n.llseek(e,0,2);var d=typeof s<"u";if(!d)s=e.position;else if(!e.seekable)throw new n.ErrnoError(70);t=e.stream_ops.write(e,t,r,o,s,u),d||(e.position+=t);try{e.path&&n.Sa.onWriteToFile&&n.Sa.onWriteToFile(e.path)}catch(w){W("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+w.message)}return t},allocate:function(e,t,r){if(n.kb(e))throw new n.ErrnoError(8);if(0>t||0>=r)throw new n.ErrnoError(28);if(!(e.flags&2097155))throw new n.ErrnoError(8);if(!n.isFile(e.node.mode)&&!n.isDir(e.node.mode))throw new n.ErrnoError(43);if(!e.stream_ops.allocate)throw new n.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap:function(e,t,r,o,s,u){if(s&2&&!(u&2)&&(e.flags&2097155)!==2)throw new n.ErrnoError(2);if((e.flags&2097155)===1)throw new n.ErrnoError(2);if(!e.stream_ops.mmap)throw new n.ErrnoError(43);return e.stream_ops.mmap(e,t,r,o,s,u)},msync:function(e,t,r,o,s){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,o,s):0},ud:function(){return 0},ic:function(e,t,r){if(!e.stream_ops.ic)throw new n.ErrnoError(59);return e.stream_ops.ic(e,t,r)},readFile:function(e,t){if(t=t||{},t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw Error('Invalid encoding type "'+t.encoding+'"');var r,o=n.open(e,t.flags);e=n.stat(e).size;var s=new Uint8Array(e);return n.read(o,s,0,e,0),t.encoding==="utf8"?r=ge(s,0):t.encoding==="binary"&&(r=s),n.close(o),r},writeFile:function(e,t,r){if(r=r||{},r.flags=r.flags||577,e=n.open(e,r.flags,r.mode),typeof t=="string"){var o=new Uint8Array(he(t)+1);t=ne(t,o,0,o.length),n.write(e,o,0,t,void 0,r.Bc)}else if(ArrayBuffer.isView(t))n.write(e,t,0,t.byteLength,void 0,r.Bc);else throw Error("Unsupported data type");n.close(e)},cwd:function(){return n.Wb},chdir:function(e){if(e=n.lookupPath(e,{Ta:!0}),e.node===null)throw new n.ErrnoError(44);if(!n.isDir(e.node.mode))throw new n.ErrnoError(54);var t=n.Za(e.node,"x");if(t)throw new n.ErrnoError(t);n.Wb=e.path},Fc:function(){n.mkdir("/tmp"),n.mkdir("/home"),n.mkdir("/home/web_user")},Ec:function(){n.mkdir("/dev"),n.Qb(n.bb(1,3),{read:function(){return 0},write:function(t,r,o,s){return s}}),n.rb("/dev/null",n.bb(1,3)),$t(n.bb(5,0),Rr),$t(n.bb(6,0),Fr),n.rb("/dev/tty",n.bb(5,0)),n.rb("/dev/tty1",n.bb(6,0));var e=Dr();n.Wa("/dev","random",e),n.Wa("/dev","urandom",e),n.mkdir("/dev/shm"),n.mkdir("/dev/shm/tmp")},Hc:function(){n.mkdir("/proc");var e=n.mkdir("/proc/self");n.mkdir("/proc/self/fd"),n.mount({mount:function(){var t=n.createNode(e,"fd",16895,73);return t.node_ops={lookup:function(r,o){var s=n.$a(+o);if(!s)throw new n.ErrnoError(8);return r={parent:null,mount:{jc:"fake"},node_ops:{readlink:function(){return s.path}}},r.parent=r}},t}},{},"/proc/self/fd")},Ic:function(){i.stdin?n.Wa("/dev","stdin",i.stdin):n.symlink("/dev/tty","/dev/stdin"),i.stdout?n.Wa("/dev","stdout",null,i.stdout):n.symlink("/dev/tty","/dev/stdout"),i.stderr?n.Wa("/dev","stderr",null,i.stderr):n.symlink("/dev/tty1","/dev/stderr"),n.open("/dev/stdin",0),n.open("/dev/stdout",1),n.open("/dev/stderr",1)},Yb:function(){n.ErrnoError||(n.ErrnoError=function(e,t){this.node=t,this.hd=function(r){this.Oa=r},this.hd(e),this.message="FS error"},n.ErrnoError.prototype=Error(),n.ErrnoError.prototype.constructor=n.ErrnoError,[44].forEach(function(e){n.Db[e]=new n.ErrnoError(e),n.Db[e].stack="<generic error, no stack>"}))},lc:function(){n.Yb(),n.Ua=Array(4096),n.mount(S,{},"/"),n.Fc(),n.Ec(),n.Hc(),n.Lc={MEMFS:S}},jb:function(e,t,r){n.jb.Hb=!0,n.Yb(),i.stdin=e||i.stdin,i.stdout=t||i.stdout,i.stderr=r||i.stderr,n.Ic()},wd:function(){n.jb.Hb=!1;var e=i._fflush;for(e&&e(0),e=0;e<n.streams.length;e++){var t=n.streams[e];t&&n.close(t)}},Eb:function(e,t){var r=0;return e&&(r|=365),t&&(r|=146),r},od:function(e,t){return e=n.xb(e,t),e.exists?e.object:null},xb:function(e,t){try{var r=n.lookupPath(e,{Ta:!t});e=r.path}catch{}var o={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,ad:!1,cd:null,bd:null};try{r=n.lookupPath(e,{parent:!0}),o.ad=!0,o.cd=r.path,o.bd=r.node,o.name=oe(e),r=n.lookupPath(e,{Ta:!t}),o.exists=!0,o.path=r.path,o.object=r.node,o.name=r.node.name,o.isRoot=r.path==="/"}catch(s){o.error=s.Oa}return o},md:function(e,t){for(e=typeof e=="string"?e:n.Ya(e),t=t.split("/").reverse();t.length;){var r=t.pop();if(r){var o=Ee(e,r);try{n.mkdir(o)}catch{}e=o}}return o},Gc:function(e,t,r,o,s){return e=Ee(typeof e=="string"?e:n.Ya(e),t),n.create(e,n.Eb(o,s))},zb:function(e,t,r,o,s,u){if(e=t?Ee(typeof e=="string"?e:n.Ya(e),t):e,o=n.Eb(o,s),s=n.create(e,o),r){if(typeof r=="string"){e=Array(r.length),t=0;for(var d=r.length;t<d;++t)e[t]=r.charCodeAt(t);r=e}n.chmod(s,o|146),e=n.open(s,577),n.write(e,r,0,r.length,0,u),n.close(e),n.chmod(s,o)}return s},Wa:function(e,t,r,o){e=Ee(typeof e=="string"?e:n.Ya(e),t),t=n.Eb(!!r,!!o),n.Wa.Kb||(n.Wa.Kb=64);var s=n.bb(n.Wa.Kb++,0);return n.Qb(s,{open:function(u){u.seekable=!1},close:function(){o&&o.buffer&&o.buffer.length&&o(10)},read:function(u,d,w,v){for(var b=0,k=0;k<v;k++){try{var T=r()}catch{throw new n.ErrnoError(29)}if(T===void 0&&b===0)throw new n.ErrnoError(6);if(T==null)break;b++,d[w+k]=T}return b&&(u.node.timestamp=Date.now()),b},write:function(u,d,w,v){for(var b=0;b<v;b++)try{o(d[w+b])}catch{throw new n.ErrnoError(29)}return v&&(u.node.timestamp=Date.now()),b}}),n.rb(e,t,s)},ac:function(e){if(e.Ib||e.Sc||e.link||e.Na)return!0;if(typeof XMLHttpRequest<"u")throw Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(Te)try{e.Na=Xe(Te(e.url),!0),e.Ra=e.Na.length}catch{throw new n.ErrnoError(29)}else throw Error("Cannot load without read() or XMLHttpRequest.")},ld:function(e,t,r,o,s){function u(){this.Jb=!1,this.ob=[]}if(u.prototype.get=function(b){if(!(b>this.length-1||0>b)){var k=b%this.chunkSize;return this.dc(b/this.chunkSize|0)[k]}},u.prototype.pc=function(b){this.dc=b},u.prototype.Ub=function(){var b=new XMLHttpRequest;if(b.open("HEAD",r,!1),b.send(null),!(200<=b.status&&300>b.status||b.status===304))throw Error("Couldn't load "+r+". Status: "+b.status);var k=Number(b.getResponseHeader("Content-length")),T,B=(T=b.getResponseHeader("Accept-Ranges"))&&T==="bytes";b=(T=b.getResponseHeader("Content-Encoding"))&&T==="gzip";var $=1048576;B||($=k);var z=this;z.pc(function(V){var me=V*$,ae=(V+1)*$-1;if(ae=Math.min(ae,k-1),typeof z.ob[V]>"u"){var bt=z.ob;if(me>ae)throw Error("invalid range ("+me+", "+ae+") or no bytes requested!");if(ae>k-1)throw Error("only "+k+" bytes available! programmer error!");var j=new XMLHttpRequest;if(j.open("GET",r,!1),k!==$&&j.setRequestHeader("Range","bytes="+me+"-"+ae),typeof Uint8Array<"u"&&(j.responseType="arraybuffer"),j.overrideMimeType&&j.overrideMimeType("text/plain; charset=x-user-defined"),j.send(null),!(200<=j.status&&300>j.status||j.status===304))throw Error("Couldn't load "+r+". Status: "+j.status);me=j.response!==void 0?new Uint8Array(j.response||[]):Xe(j.responseText||"",!0),bt[V]=me}if(typeof z.ob[V]>"u")throw Error("doXHR failed!");return z.ob[V]}),(b||!k)&&($=k=1,$=k=this.dc(0).length,Ue("LazyFiles on gzip forces download of the whole file when length is accessed")),this.tc=k,this.sc=$,this.Jb=!0},typeof XMLHttpRequest<"u"){if(!P)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var d=new u;Object.defineProperties(d,{length:{get:function(){return this.Jb||this.Ub(),this.tc}},chunkSize:{get:function(){return this.Jb||this.Ub(),this.sc}}}),d={Ib:!1,Na:d}}else d={Ib:!1,url:r};var w=n.Gc(e,t,d,o,s);d.Na?w.Na=d.Na:d.url&&(w.Na=null,w.url=d.url),Object.defineProperties(w,{Ra:{get:function(){return this.Na.length}}});var v={};return Object.keys(w.stream_ops).forEach(function(b){var k=w.stream_ops[b];v[b]=function(){return n.ac(w),k.apply(null,arguments)}}),v.read=function(b,k,T,B,$){if(n.ac(w),b=b.node.Na,$>=b.length)return 0;if(B=Math.min(b.length-$,B),b.slice)for(var z=0;z<B;z++)k[T+z]=b[$+z];else for(z=0;z<B;z++)k[T+z]=b.get($+z);return B},w.stream_ops=v,w},nd:function(e,t,r,o,s,u,d,w,v,b){function k(B){function $(V){b&&b(),w||n.zb(e,t,V,o,s,v),u&&u(),je()}var z=!1;i.preloadPlugins.forEach(function(V){!z&&V.canHandle(T)&&(V.handle(B,T,$,function(){d&&d(),je()}),z=!0)}),z||$(B)}Mr.jb();var T=t?pe(Ee(e,t)):e;at(),typeof r=="string"?Nr(r,function(B){k(B)},d):k(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},Rb:function(){return"EM_FS_"+window.location.pathname},Sb:20,ib:"FILE_DATA",xd:function(e,t,r){t=t||function(){},r=r||function(){};var o=n.indexedDB();try{var s=o.open(n.Rb(),n.Sb)}catch(u){return r(u)}s.onupgradeneeded=function(){Ue("creating db"),s.result.createObjectStore(n.ib)},s.onsuccess=function(){var u=s.result.transaction([n.ib],"readwrite"),d=u.objectStore(n.ib),w=0,v=0,b=e.length;e.forEach(function(k){k=d.put(n.xb(k).object.Na,k),k.onsuccess=function(){w++,w+v==b&&(v==0?t():r())},k.onerror=function(){v++,w+v==b&&(v==0?t():r())}}),u.onerror=r},s.onerror=r},rd:function(e,t,r){t=t||function(){},r=r||function(){};var o=n.indexedDB();try{var s=o.open(n.Rb(),n.Sb)}catch(u){return r(u)}s.onupgradeneeded=r,s.onsuccess=function(){var u=s.result;try{var d=u.transaction([n.ib],"readonly")}catch(T){r(T);return}var w=d.objectStore(n.ib),v=0,b=0,k=e.length;e.forEach(function(T){var B=w.get(T);B.onsuccess=function(){n.xb(T).exists&&n.unlink(T),n.zb(Ie(T),oe(T),B.result,!0,!0,!0),v++,v+b==k&&(b==0?t():r())},B.onerror=function(){b++,v+b==k&&(b==0?t():r())}}),d.onerror=r},s.onerror=r}},ft={};function ct(e,t,r){try{var o=e(t)}catch(s){if(s&&s.node&&_e(t)!==_e(n.Ya(s.node)))return-54;throw s}return _[r>>2]=o.dev,_[r+4>>2]=0,_[r+8>>2]=o.ino,_[r+12>>2]=o.mode,_[r+16>>2]=o.nlink,_[r+20>>2]=o.uid,_[r+24>>2]=o.gid,_[r+28>>2]=o.rdev,_[r+32>>2]=0,H=[o.size>>>0,(N=o.size,1<=+Math.abs(N)?0<N?(Math.min(+Math.floor(N/4294967296),4294967295)|0)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],_[r+40>>2]=H[0],_[r+44>>2]=H[1],_[r+48>>2]=4096,_[r+52>>2]=o.blocks,_[r+56>>2]=o.atime.getTime()/1e3|0,_[r+60>>2]=0,_[r+64>>2]=o.mtime.getTime()/1e3|0,_[r+68>>2]=0,_[r+72>>2]=o.ctime.getTime()/1e3|0,_[r+76>>2]=0,H=[o.ino>>>0,(N=o.ino,1<=+Math.abs(N)?0<N?(Math.min(+Math.floor(N/4294967296),4294967295)|0)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],_[r+80>>2]=H[0],_[r+84>>2]=H[1],0}var Ce=void 0;function Ve(){return Ce+=4,_[Ce-4>>2]}function ie(e){if(e=n.$a(e),!e)throw new n.ErrnoError(8);return e}var ht;ht=re?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:function(){return performance.now()};var dt={};function It(){if(!pt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:F||"./this.program"},t;for(t in dt)dt[t]===void 0?delete e[t]:e[t]=dt[t];var r=[];for(t in e)r.push(t+"="+e[t]);pt=r}return pt}var pt;function Ct(e,t,r,o){e||(e=this),this.parent=e,this.mount=e.mount,this.lb=null,this.id=n.Zc++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=o}Object.defineProperties(Ct.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(e){e?this.mode|=146:this.mode&=-147}},Sc:{get:function(){return n.isDir(this.mode)}},Ib:{get:function(){return n.pb(this.mode)}}}),n.FSNode=Ct,n.lc();var Mr;function Xe(e,t){var r=Array(he(e)+1);return e=ne(e,r,0,r.length),t&&(r.length=e),r}var Or={a:function(e,t,r,o){D("Assertion failed: "+L(e)+", at: "+[t?L(t):"unknown filename",r,o?L(o):"unknown function"])},u:function(e,t){qr(),e=new Date(1e3*_[e>>2]),_[t>>2]=e.getSeconds(),_[t+4>>2]=e.getMinutes(),_[t+8>>2]=e.getHours(),_[t+12>>2]=e.getDate(),_[t+16>>2]=e.getMonth(),_[t+20>>2]=e.getFullYear()-1900,_[t+24>>2]=e.getDay();var r=new Date(e.getFullYear(),0,1);_[t+28>>2]=(e.getTime()-r.getTime())/864e5|0,_[t+36>>2]=-(60*e.getTimezoneOffset());var o=new Date(e.getFullYear(),6,1).getTimezoneOffset();return r=r.getTimezoneOffset(),e=(o!=r&&e.getTimezoneOffset()==Math.min(r,o))|0,_[t+32>>2]=e,e=_[ve()+(e?4:0)>>2],_[t+40>>2]=e,t},m:function(e,t){try{if(e=L(e),t&-8)var r=-28;else{var o;(o=n.lookupPath(e,{Ta:!0}).node)?(e="",t&4&&(e+="r"),t&2&&(e+="w"),t&1&&(e+="x"),r=e&&n.Za(o,e)?-2:0):r=-44}return r}catch(s){return typeof n<"u"&&s instanceof n.ErrnoError||D(s),-s.Oa}},A:function(e,t){try{return e=L(e),n.chmod(e,t),0}catch(r){return typeof n<"u"&&r instanceof n.ErrnoError||D(r),-r.Oa}},H:function(e,t,r){try{return e=L(e),n.chown(e,t,r),0}catch(o){return typeof n<"u"&&o instanceof n.ErrnoError||D(o),-o.Oa}},B:function(e,t){try{return n.fchmod(e,t),0}catch(r){return typeof n<"u"&&r instanceof n.ErrnoError||D(r),-r.Oa}},I:function(e,t,r){try{return n.fchown(e,t,r),0}catch(o){return typeof n<"u"&&o instanceof n.ErrnoError||D(o),-o.Oa}},b:function(e,t,r){Ce=r;try{var o=ie(e);switch(t){case 0:var s=Ve();return 0>s?-28:n.open(o.path,o.flags,0,s).fd;case 1:case 2:return 0;case 3:return o.flags;case 4:return s=Ve(),o.flags|=s,0;case 12:return s=Ve(),$e[s+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return _[mt()>>2]=28,-1;default:return-28}}catch(u){return typeof n<"u"&&u instanceof n.ErrnoError||D(u),-u.Oa}},E:function(e,t){try{var r=ie(e);return ct(n.stat,r.path,t)}catch(o){return typeof n<"u"&&o instanceof n.ErrnoError||D(o),-o.Oa}},n:function(e,t,r){try{return n.Nc(e,r),0}catch(o){return typeof n<"u"&&o instanceof n.ErrnoError||D(o),-o.Oa}},l:function(e,t){try{if(t===0)return-28;var r=n.cwd();return t<he(r)+1?-68:(ne(r,X,e,t),e)}catch(o){return typeof n<"u"&&o instanceof n.ErrnoError||D(o),-o.Oa}},G:function(){return 0},d:function(){return 42},z:function(e,t){try{return e=L(e),ct(n.lstat,e,t)}catch(r){return typeof n<"u"&&r instanceof n.ErrnoError||D(r),-r.Oa}},C:function(e,t){try{return e=L(e),e=_e(e),e[e.length-1]==="/"&&(e=e.substr(0,e.length-1)),n.mkdir(e,t,0),0}catch(r){return typeof n<"u"&&r instanceof n.ErrnoError||D(r),-r.Oa}},y:function(e,t,r,o,s,u){try{e:{u<<=12;var d=!1;if(o&16&&e%65536!==0)var w=-28;else{if(o&32){var v=jt(t);if(!v){w=-48;break e}d=!0}else{var b=n.$a(s);if(!b){w=-8;break e}var k=n.mmap(b,e,t,u,r,o);v=k.ed,d=k.vb}ft[v]={Uc:v,Tc:t,vb:d,fd:s,dd:r,flags:o,offset:u},w=v}}return w}catch(T){return typeof n<"u"&&T instanceof n.ErrnoError||D(T),-T.Oa}},x:function(e,t){try{var r=ft[e];if(t!==0&&r){if(t===r.Tc){var o=n.$a(r.fd);if(o&&r.dd&2){var s=r.flags,u=r.offset,d=X.slice(e,e+t);n.msync(o,d,u,t,s)}ft[e]=null,r.vb&&Oe(r.Uc)}var w=0}else w=-28;return w}catch(v){return typeof n<"u"&&v instanceof n.ErrnoError||D(v),-v.Oa}},w:function(e,t,r){Ce=r;try{var o=L(e),s=r?Ve():0;return n.open(o,t,s).fd}catch(u){return typeof n<"u"&&u instanceof n.ErrnoError||D(u),-u.Oa}},J:function(e,t,r){try{if(e=L(e),0>=r)var o=-28;else{var s=n.readlink(e),u=Math.min(r,he(s)),d=U[t+u];ne(s,X,t,r+1),U[t+u]=d,o=u}return o}catch(w){return typeof n<"u"&&w instanceof n.ErrnoError||D(w),-w.Oa}},F:function(e){try{return e=L(e),n.rmdir(e),0}catch(t){return typeof n<"u"&&t instanceof n.ErrnoError||D(t),-t.Oa}},e:function(e,t){try{return e=L(e),ct(n.stat,e,t)}catch(r){return typeof n<"u"&&r instanceof n.ErrnoError||D(r),-r.Oa}},i:function(e){try{return e=L(e),n.unlink(e),0}catch(t){return typeof n<"u"&&t instanceof n.ErrnoError||D(t),-t.Oa}},v:function(){return 2147483648},p:function(e,t,r){X.copyWithin(e,t,t+r)},c:function(e){var t=X.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296),o=Math.max(e,o),0<o%65536&&(o+=65536-o%65536);e:{try{tt.grow(Math.min(2147483648,o)-ot.byteLength+65535>>>16),Nt();var s=1;break e}catch{}s=void 0}if(s)return!0}return!1},t:function(e){for(var t=ht();ht()-t<e;);},r:function(e,t){try{var r=0;return It().forEach(function(o,s){var u=t+r;for(s=_[e+4*s>>2]=u,u=0;u<o.length;++u)U[s++>>0]=o.charCodeAt(u);U[s>>0]=0,r+=o.length+1}),0}catch(o){return typeof n<"u"&&o instanceof n.ErrnoError||D(o),o.Oa}},s:function(e,t){try{var r=It();_[e>>2]=r.length;var o=0;return r.forEach(function(s){o+=s.length+1}),_[t>>2]=o,0}catch(s){return typeof n<"u"&&s instanceof n.ErrnoError||D(s),s.Oa}},f:function(e){try{var t=ie(e);return n.close(t),0}catch(r){return typeof n<"u"&&r instanceof n.ErrnoError||D(r),r.Oa}},q:function(e,t){try{var r=ie(e),o=r.tty?2:n.isDir(r.mode)?3:n.fb(r.mode)?7:4;return U[t>>0]=o,0}catch(s){return typeof n<"u"&&s instanceof n.ErrnoError||D(s),s.Oa}},j:function(e,t,r,o){try{e:{for(var s=ie(e),u=e=0;u<r;u++){var d=_[t+(8*u+4)>>2],w=n.read(s,U,_[t+8*u>>2],d,void 0);if(0>w){var v=-1;break e}if(e+=w,w<d)break}v=e}return _[o>>2]=v,0}catch(b){return typeof n<"u"&&b instanceof n.ErrnoError||D(b),b.Oa}},o:function(e,t,r,o,s){try{var u=ie(e);return e=4294967296*r+(t>>>0),-9007199254740992>=e||9007199254740992<=e?-61:(n.llseek(u,e,o),H=[u.position>>>0,(N=u.position,1<=+Math.abs(N)?0<N?(Math.min(+Math.floor(N/4294967296),4294967295)|0)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],_[s>>2]=H[0],_[s+4>>2]=H[1],u.Fb&&e===0&&o===0&&(u.Fb=null),0)}catch(d){return typeof n<"u"&&d instanceof n.ErrnoError||D(d),d.Oa}},k:function(e){try{var t=ie(e);return t.stream_ops&&t.stream_ops.fsync?-t.stream_ops.fsync(t):0}catch(r){return typeof n<"u"&&r instanceof n.ErrnoError||D(r),r.Oa}},g:function(e,t,r,o){try{e:{for(var s=ie(e),u=e=0;u<r;u++){var d=n.write(s,U,_[t+8*u>>2],_[t+(8*u+4)>>2],void 0);if(0>d){var w=-1;break e}e+=d}w=e}return _[o>>2]=w,0}catch(v){return typeof n<"u"&&v instanceof n.ErrnoError||D(v),v.Oa}},h:function(e){var t=Date.now();return _[e>>2]=t/1e3|0,_[e+4>>2]=t%1e3*1e3|0,0},K:function(e){var t=Date.now()/1e3|0;return e&&(_[e>>2]=t),t},D:function(e,t){if(t){var r=t+8;t=1e3*_[r>>2],t+=_[r+4>>2]/1e3}else t=Date.now();e=L(e);try{n.kd(e,t,t);var o=0}catch(s){if(!(s instanceof n.ErrnoError)){e:{if(o=Error(),!o.stack){try{throw Error()}catch(u){o=u}if(!o.stack){o="(no stack trace available)";break e}}o=o.stack.toString()}throw i.extraStackTrace&&(o+=`
`+i.extraStackTrace()),o=Sr(o),s+" : "+o}o=s.Oa,_[mt()>>2]=o,o=-1}return o}};(function(){function e(s){i.asm=s.exports,tt=i.asm.L,Nt(),Z=i.asm.Da,Ot.unshift(i.asm.M),je()}function t(s){e(s.instance)}function r(s){return Ar().then(function(u){return WebAssembly.instantiate(u,o)}).then(s,function(u){W("failed to asynchronously prepare wasm: "+u),D(u)})}var o={a:Or};if(at(),i.instantiateWasm)try{return i.instantiateWasm(o,e)}catch(s){return W("Module.instantiateWasm callback failed with error: "+s),!1}return function(){return Fe||typeof WebAssembly.instantiateStreaming!="function"||zt()||Q.startsWith("file://")||typeof fetch!="function"?r(t):fetch(Q,{credentials:"same-origin"}).then(function(s){return WebAssembly.instantiateStreaming(s,o).then(t,function(u){return W("wasm streaming compile failed: "+u),W("falling back to ArrayBuffer instantiation"),r(t)})})}(),{}})(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.M).apply(null,arguments)},i._sqlite3_vfs_find=function(){return(i._sqlite3_vfs_find=i.asm.N).apply(null,arguments)},i._sqlite3_free=function(){return(i._sqlite3_free=i.asm.O).apply(null,arguments)};var mt=i.___errno_location=function(){return(mt=i.___errno_location=i.asm.P).apply(null,arguments)};i._sqlite3_finalize=function(){return(i._sqlite3_finalize=i.asm.Q).apply(null,arguments)},i._sqlite3_reset=function(){return(i._sqlite3_reset=i.asm.R).apply(null,arguments)},i._sqlite3_clear_bindings=function(){return(i._sqlite3_clear_bindings=i.asm.S).apply(null,arguments)},i._sqlite3_value_blob=function(){return(i._sqlite3_value_blob=i.asm.T).apply(null,arguments)},i._sqlite3_value_text=function(){return(i._sqlite3_value_text=i.asm.U).apply(null,arguments)},i._sqlite3_value_bytes=function(){return(i._sqlite3_value_bytes=i.asm.V).apply(null,arguments)},i._sqlite3_value_double=function(){return(i._sqlite3_value_double=i.asm.W).apply(null,arguments)},i._sqlite3_value_int=function(){return(i._sqlite3_value_int=i.asm.X).apply(null,arguments)},i._sqlite3_value_type=function(){return(i._sqlite3_value_type=i.asm.Y).apply(null,arguments)},i._sqlite3_result_blob=function(){return(i._sqlite3_result_blob=i.asm.Z).apply(null,arguments)},i._sqlite3_result_double=function(){return(i._sqlite3_result_double=i.asm._).apply(null,arguments)},i._sqlite3_result_error=function(){return(i._sqlite3_result_error=i.asm.$).apply(null,arguments)},i._sqlite3_result_int=function(){return(i._sqlite3_result_int=i.asm.aa).apply(null,arguments)},i._sqlite3_result_int64=function(){return(i._sqlite3_result_int64=i.asm.ba).apply(null,arguments)},i._sqlite3_result_null=function(){return(i._sqlite3_result_null=i.asm.ca).apply(null,arguments)},i._sqlite3_result_text=function(){return(i._sqlite3_result_text=i.asm.da).apply(null,arguments)},i._sqlite3_step=function(){return(i._sqlite3_step=i.asm.ea).apply(null,arguments)},i._sqlite3_column_count=function(){return(i._sqlite3_column_count=i.asm.fa).apply(null,arguments)},i._sqlite3_data_count=function(){return(i._sqlite3_data_count=i.asm.ga).apply(null,arguments)},i._sqlite3_column_blob=function(){return(i._sqlite3_column_blob=i.asm.ha).apply(null,arguments)},i._sqlite3_column_bytes=function(){return(i._sqlite3_column_bytes=i.asm.ia).apply(null,arguments)},i._sqlite3_column_double=function(){return(i._sqlite3_column_double=i.asm.ja).apply(null,arguments)},i._sqlite3_column_text=function(){return(i._sqlite3_column_text=i.asm.ka).apply(null,arguments)},i._sqlite3_column_type=function(){return(i._sqlite3_column_type=i.asm.la).apply(null,arguments)},i._sqlite3_column_name=function(){return(i._sqlite3_column_name=i.asm.ma).apply(null,arguments)},i._sqlite3_bind_blob=function(){return(i._sqlite3_bind_blob=i.asm.na).apply(null,arguments)},i._sqlite3_bind_double=function(){return(i._sqlite3_bind_double=i.asm.oa).apply(null,arguments)},i._sqlite3_bind_int=function(){return(i._sqlite3_bind_int=i.asm.pa).apply(null,arguments)},i._sqlite3_bind_text=function(){return(i._sqlite3_bind_text=i.asm.qa).apply(null,arguments)},i._sqlite3_bind_parameter_index=function(){return(i._sqlite3_bind_parameter_index=i.asm.ra).apply(null,arguments)},i._sqlite3_sql=function(){return(i._sqlite3_sql=i.asm.sa).apply(null,arguments)},i._sqlite3_normalized_sql=function(){return(i._sqlite3_normalized_sql=i.asm.ta).apply(null,arguments)},i._sqlite3_errmsg=function(){return(i._sqlite3_errmsg=i.asm.ua).apply(null,arguments)},i._sqlite3_exec=function(){return(i._sqlite3_exec=i.asm.va).apply(null,arguments)},i._sqlite3_prepare_v2=function(){return(i._sqlite3_prepare_v2=i.asm.wa).apply(null,arguments)},i._sqlite3_changes=function(){return(i._sqlite3_changes=i.asm.xa).apply(null,arguments)},i._sqlite3_close_v2=function(){return(i._sqlite3_close_v2=i.asm.ya).apply(null,arguments)},i._sqlite3_create_function_v2=function(){return(i._sqlite3_create_function_v2=i.asm.za).apply(null,arguments)},i._sqlite3_open=function(){return(i._sqlite3_open=i.asm.Aa).apply(null,arguments)};var Qe=i._malloc=function(){return(Qe=i._malloc=i.asm.Ba).apply(null,arguments)},Oe=i._free=function(){return(Oe=i._free=i.asm.Ca).apply(null,arguments)};i._RegisterExtensionFunctions=function(){return(i._RegisterExtensionFunctions=i.asm.Ea).apply(null,arguments)},i._register_for_idb=function(){return(i._register_for_idb=i.asm.Fa).apply(null,arguments)};var ve=i.__get_tzname=function(){return(ve=i.__get_tzname=i.asm.Ga).apply(null,arguments)},Vt=i.__get_daylight=function(){return(Vt=i.__get_daylight=i.asm.Ha).apply(null,arguments)},Xt=i.__get_timezone=function(){return(Xt=i.__get_timezone=i.asm.Ia).apply(null,arguments)},Pe=i.stackSave=function(){return(Pe=i.stackSave=i.asm.Ja).apply(null,arguments)},ze=i.stackRestore=function(){return(ze=i.stackRestore=i.asm.Ka).apply(null,arguments)},se=i.stackAlloc=function(){return(se=i.stackAlloc=i.asm.La).apply(null,arguments)},Qt=i._memalign=function(){return(Qt=i._memalign=i.asm.Ma).apply(null,arguments)};i.cwrap=function(e,t,r,o){r=r||[];var s=r.every(function(u){return u==="number"});return t!=="string"&&s&&!o?Tt(e):function(){return vr(e,t,r,arguments)}},i.UTF8ToString=L,i.FS=n,i.stackSave=Pe,i.stackRestore=ze,i.stackAlloc=se;var He;Me=function e(){He||wt(),He||(Me=e)};function wt(){function e(){if(!He&&(He=!0,i.calledRun=!0,!Dt)){if(i.noFSInit||n.jb.Hb||n.jb(),n.hc=!1,ut(Ot),i.onRuntimeInitialized&&i.onRuntimeInitialized(),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;){var t=i.postRun.shift();Pt.unshift(t)}ut(Pt)}}if(!(0<de)){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)kr();ut(Mt),0<de||(i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),e()},1)):e())}}if(i.run=wt,i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return wt(),i}),f)};p.exports=l,p.exports.default=l})(yt);var tr=yt.exports,rr=Kt(tr);const gt={EPERM:63,ENOENT:44};class nr{constructor(a,f){this.FS=a,this.backend=f,this.node_ops={getattr:l=>{let c=a.isFile(l.mode)?l.contents.getattr():null,m={};return m.dev=1,m.ino=l.id,m.mode=c?c.mode:l.mode,m.nlink=1,m.uid=0,m.gid=0,m.rdev=l.rdev,m.size=c?c.size:a.isDir(l.mode)?4096:0,m.atime=new Date(0),m.mtime=new Date(0),m.ctime=new Date(0),m.blksize=c?c.blockSize:4096,m.blocks=Math.ceil(m.size/m.blksize),m},setattr:(l,c)=>{this.FS.isFile(l.mode)?l.contents.setattr(c):(c.mode!=null&&(l.mode=c.mode),c.size!=null&&(l.size=c.size))},lookup:(l,c)=>{throw new this.FS.ErrnoError(gt.ENOENT)},mknod:(l,c,m,g)=>{if(c.endsWith(".lock"))throw new Error("Locking via lockfiles is not supported");return this.createNode(l,c,m,g)},rename:(l,c,m)=>{throw new Error("rename not implemented")},unlink:(l,c)=>{this.FS.lookupNode(l,c).contents.delete(c)},readdir:l=>{throw new Error("readdir not implemented")},symlink:(l,c,m)=>{throw new Error("symlink not implemented")},readlink:l=>{throw new Error("symlink not implemented")}},this.stream_ops={open:l=>{this.FS.isFile(l.node.mode)&&l.node.contents.open()},close:l=>{this.FS.isFile(l.node.mode)&&l.node.contents.close()},read:(l,c,m,g,E)=>l.node.contents.read(c,m,g,E),write:(l,c,m,g,E)=>l.node.contents.write(c,m,g,E),llseek:(l,c,m)=>{var g=c;if(m===1?g+=l.position:m===2&&a.isFile(l.node.mode)&&(g+=l.node.contents.getattr().size),g<0)throw new this.FS.ErrnoError(28);return g},allocate:(l,c,m)=>{l.node.contents.setattr({size:c+m})},mmap:(l,c,m,g,E,i)=>{throw new Error("mmap not implemented")},msync:(l,c,m,g,E)=>{throw new Error("msync not implemented")},fsync:(l,c,m,g,E)=>{l.node.contents.fsync()}}}mount(){return this.createNode(null,"/",16895,0)}lock(a,f){let{node:l}=this.FS.lookupPath(a);return l&&l.contents?l.contents.lock(f):!0}unlock(a,f){let{node:l}=this.FS.lookupPath(a);return l&&l.contents?l.contents.unlock(f):!0}createNode(a,f,l,c){if(!(this.FS.isDir(l)||this.FS.isFile(l)))throw new this.FS.ErrnoError(gt.EPERM);var m=this.FS.createNode(a,f,l,c);return this.FS.isDir(m.mode)?(m.node_ops={mknod:this.node_ops.mknod,lookup:this.node_ops.lookup,unlink:this.node_ops.unlink,setattr:this.node_ops.setattr},m.stream_ops={},m.contents={}):this.FS.isFile(m.mode)&&(m.node_ops=this.node_ops,m.stream_ops=this.stream_ops,m.contents=this.backend.createFile(f)),a&&(a.contents[f]=m,a.timestamp=m.timestamp),m}}const or=nr;let Se={NONE:0,SHARED:1,RESERVED:2,PENDING:3,EXCLUSIVE:4};function Ze(p){let a=p[16],f=p[17];return(a<<8)+f}function ir(p,a){if(p!=null&&a!=null){let f=new Uint8Array(p),l=new Uint8Array(a);for(let c=24;c<40;c++)if(f[c]!==l[c])return!1;return!0}return p==null&&a==null}function sr(p,a,f){let l=[];for(let c=p;c<=a;c+=f)l.push(c);return l}function _t(p,a,f){let l=a-a%p,c=f-1-(f-1)%p;return sr(l,c,p)}function ar(p,a,f){let l=new ArrayBuffer(f-a),c=new Uint8Array(l);for(let m=0;m<p.length;m++){let g=p[m];if(g.data.constructor.name!=="ArrayBuffer")throw new Error("Chunk data is not an ArrayBuffer");let E=0,i=g.data.byteLength;if(a>g.pos&&(E=a-g.pos),f<g.pos+g.data.byteLength&&(i=f-g.pos),E>g.data.byteLength||i<0)continue;let R=i-E;c.set(new Uint8Array(g.data,E,R),g.pos-a+E)}return l}function Et(p,a,f,l){let c=_t(a,f,l),m=0;return c.map(g=>{let E=0,i=a;f>g&&f<g+a&&(E=f-g),l>g&&l<g+a&&(i=l-g);let R=i-E,O=new ArrayBuffer(a);if(f>g+a||l<=g)return null;let F=p.byteOffset+m,x=p.buffer.byteLength-F;if(x<=0)return null;let P=Math.min(R,x);return new Uint8Array(O).set(new Uint8Array(p.buffer,F,P),E),m+=P,{pos:g,data:O,offset:E,length:P}}).filter(Boolean)}class ur{constructor(a,f,l=null){this.filename=a,this.buffer=new Map,this.ops=f,this.meta=l,this._metaDirty=!1,this.writeLock=!1,this.openHandles=0}bufferChunks(a){for(let f=0;f<a.length;f++){let l=a[f];this.buffer.set(l.pos,l)}}open(){if(this.openHandles++,this.openHandles===1){this.ops.open();let a=this.ops.readMeta();this.meta==null&&(a==null&&(a={size:0}),this.meta=a)}return this.meta}close(){this.fsync(),this.openHandles=Math.max(this.openHandles-1,0),this.openHandles===0&&this.ops.close()}delete(){this.ops.delete()}load(a){let f=a.reduce((c,m)=>{let g=this.buffer.get(m);return g?c.chunks.push(g):c.missing.push(m),c},{chunks:[],missing:[]}),l=[];return f.missing.length>0&&(l=this.ops.readBlocks(f.missing,this.meta.blockSize)),f.chunks.concat(l)}read(a,f,l,c){let m=a.buffer;if(l<=0||c<0)return 0;if(c>=this.meta.size){let P=new Uint8Array(m,f);for(let re=0;re<l;re++)P[re]=0;return l}c=Math.max(c,0);let g=Math.min(l,this.meta.size-c),E=c,i=c+g,R=_t(this.meta.blockSize,E,i),O=this.load(R),F=ar(O,E,i);if(m.byteLength-f<F.byteLength)throw new Error("Buffer given to `read` is too small");let x=new Uint8Array(m);x.set(new Uint8Array(F),f);for(let P=g;P<l;P++)x[f+P]=0;return l}write(a,f,l,c){if(this.meta.blockSize==null){let F=Ze(new Uint8Array(a.buffer,a.byteOffset+f));if(![512,1024,2048,4096,8192,16384,32768,65536].includes(F))throw new Error("File has invalid page size. (the first block of a new file must be written first)");this.setattr({blockSize:F})}let m=a.buffer;if(l<=0||c<0||m.byteLength===0)return 0;l=Math.min(l,m.byteLength-f);let g=Et(new Uint8Array(m,f,l),this.meta.blockSize,c,c+l),{partialWrites:E,fullWrites:i}=g.reduce((F,x)=>(x.length!==this.meta.blockSize?F.partialWrites.push(x):F.fullWrites.push({pos:x.pos,data:x.data}),F),{fullWrites:[],partialWrites:[]}),R=[];E.length>0&&(R=this.load(E.map(F=>F.pos)));let O=i.concat(R.map(F=>{let x=E.find(P=>P.pos===F.pos);return new Uint8Array(F.data).set(new Uint8Array(x.data,x.offset,x.length),x.offset,x.length),F}));return this.bufferChunks(O),c+l>this.meta.size&&this.setattr({size:c+l}),l}async readIfFallback(){if(this.ops.readIfFallback){let a=await this.ops.readIfFallback();this.meta=a||{size:0}}}lock(a){return this._recordingLock||(this._recordingLock=!0),this.ops.lock(a)?(a>=Se.RESERVED&&(this.writeLock=!0),!0):!1}unlock(a){return a===0&&(this._recordingLock=!1),this.writeLock&&(this.fsync(),this.writeLock=!1),this.ops.unlock(a)}fsync(){if(this.buffer.size>0){let a=this.buffer.get(0);if(a){let f=Ze(new Uint8Array(a.data));if(f!==this.meta.blockSize){let l=this.buffer;this.buffer=new Map;let c=[...l.values()],m=c.length*this.meta.blockSize,g=new ArrayBuffer(m),E=new Uint8Array(g);for(let i of c)E.set(new Uint8Array(i.data),i.pos);this.bufferChunks(Et(E,f,0,m)),this.setattr({blockSize:f})}}this.ops.writeBlocks([...this.buffer.values()],this.meta.blockSize)}this._metaDirty&&(this.ops.writeMeta({size:this.meta.size}),this._metaDirty=!1),this.buffer=new Map}setattr(a){this.meta==null&&(this.meta={}),a.mode!==void 0&&(this.meta.mode=a.mode),a.blockSize!==void 0&&(this.meta.blockSize=a.blockSize),a.size!==void 0&&(this.meta.size=a.size,this._metaDirty=!0)}getattr(){return this.meta}}let vt=3735928559,G=0,ue=1;class lr{constructor(a,{initialOffset:f=4,useAtomics:l=!0,stream:c=!0,debug:m,name:g}={}){this.buffer=a,this.atomicView=new Int32Array(a),this.offset=f,this.useAtomics=l,this.stream=c,this.debug=m,this.name=g}log(...a){this.debug&&console.log(`[reader: ${this.name}]`,...a)}waitWrite(a,f=null){if(this.useAtomics){for(this.log(`waiting for ${a}`);Atomics.load(this.atomicView,0)===G;){if(f!=null&&Atomics.wait(this.atomicView,0,G,f)==="timed-out")throw new Error("timeout");Atomics.wait(this.atomicView,0,G,500)}this.log(`resumed for ${a}`)}else if(this.atomicView[0]!==ue)throw new Error("`waitWrite` expected array to be readable")}flip(){if(this.log("flip"),this.useAtomics){if(Atomics.compareExchange(this.atomicView,0,ue,G)!==ue)throw new Error("Read data out of sync! This is disastrous");Atomics.notify(this.atomicView,0)}else this.atomicView[0]=G;this.offset=4}done(){this.waitWrite("done");let f=new DataView(this.buffer,this.offset).getUint32(0)===vt;return f&&(this.log("done"),this.flip()),f}peek(a){this.peekOffset=this.offset;let f=a();return this.offset=this.peekOffset,this.peekOffset=null,f}string(a){this.waitWrite("string",a);let f=this._int32(),l=f/2,c=new DataView(this.buffer,this.offset,f),m=[];for(let E=0;E<l;E++)m.push(c.getUint16(E*2));let g=String.fromCharCode.apply(null,m);return this.log("string",g),this.offset+=f,this.peekOffset==null&&this.flip(),g}_int32(){let a=4,l=new DataView(this.buffer,this.offset).getInt32();return this.log("_int32",l),this.offset+=a,l}int32(){this.waitWrite("int32");let a=this._int32();return this.log("int32",a),this.peekOffset==null&&this.flip(),a}bytes(){this.waitWrite("bytes");let a=this._int32(),f=new ArrayBuffer(a);return new Uint8Array(f).set(new Uint8Array(this.buffer,this.offset,a)),this.log("bytes",f),this.offset+=a,this.peekOffset==null&&this.flip(),f}}class fr{constructor(a,{initialOffset:f=4,useAtomics:l=!0,stream:c=!0,debug:m,name:g}={}){this.buffer=a,this.atomicView=new Int32Array(a),this.offset=f,this.useAtomics=l,this.stream=c,this.debug=m,this.name=g,this.useAtomics?Atomics.store(this.atomicView,0,G):this.atomicView[0]=G}log(...a){this.debug&&console.log(`[writer: ${this.name}]`,...a)}waitRead(a){if(this.useAtomics){if(this.log(`waiting for ${a}`),Atomics.compareExchange(this.atomicView,0,G,ue)!==G)throw new Error("Wrote something into unwritable buffer! This is disastrous");for(Atomics.notify(this.atomicView,0);Atomics.load(this.atomicView,0)===ue;)Atomics.wait(this.atomicView,0,ue,500);this.log(`resumed for ${a}`)}else this.atomicView[0]=ue;this.offset=4}finalize(){this.log("finalizing"),new DataView(this.buffer,this.offset).setUint32(0,vt),this.waitRead("finalize")}string(a){this.log("string",a);let f=a.length*2;this._int32(f);let l=new DataView(this.buffer,this.offset,f);for(let c=0;c<a.length;c++)l.setUint16(c*2,a.charCodeAt(c));this.offset+=f,this.waitRead("string")}_int32(a){let f=4;new DataView(this.buffer,this.offset).setInt32(0,a),this.offset+=f}int32(a){this.log("int32",a),this._int32(a),this.waitRead("int32")}bytes(a){this.log("bytes",a);let f=a.byteLength;this._int32(f),new Uint8Array(this.buffer,this.offset).set(new Uint8Array(a)),this.offset+=f,this.waitRead("bytes")}}function kt(p,a){return Math.round(p/a)}function cr(p,a){self.postMessage({type:"__absurd:spawn-idb-worker",argBuffer:a.buffer,resultBuffer:p.buffer}),self.addEventListener("message",f=>{switch(f.data.type){case"__perf-deets:start-profile":a.string("profile-start"),a.finalize(),p.int32(),p.done();break;case"__perf-deets:stop-profile":a.string("profile-stop"),a.finalize(),p.int32(),p.done();break}})}class hr{constructor(a){this.filename=a}getStoreName(){return this.filename.replace(/\//g,"-")}invokeWorker(a,f){if(this.reader==null||this.writer==null)throw new Error(`Attempted ${a} on ${this.filename} but file not open`);let l=this.reader,c=this.writer;switch(a){case"readBlocks":{let{name:m,positions:g,blockSize:E}=f,i=[];for(let R of g){c.string("readBlock"),c.string(m),c.int32(kt(R,E)),c.finalize();let O=l.bytes();l.done(),i.push({pos:R,data:O.byteLength===0?new ArrayBuffer(E):O})}return i}case"writeBlocks":{let{name:m,writes:g,blockSize:E}=f;c.string("writeBlocks"),c.string(m);for(let R of g)c.int32(kt(R.pos,E)),c.bytes(R.data);c.finalize();let i=l.int32();return l.done(),i}case"readMeta":{c.string("readMeta"),c.string(f.name),c.finalize();let m=l.int32(),g=l.int32();return l.done(),m===-1?null:{size:m,blockSize:g}}case"writeMeta":{let{name:m,meta:g}=f;c.string("writeMeta"),c.string(m),c.int32(g.size),c.finalize();let E=l.int32();return l.done(),E}case"closeFile":{c.string("closeFile"),c.string(f.name),c.finalize();let m=l.int32();return l.done(),m}case"lockFile":{c.string("lockFile"),c.string(f.name),c.int32(f.lockType),c.finalize();let m=l.int32();return l.done(),m===0}case"unlockFile":{c.string("unlockFile"),c.string(f.name),c.int32(f.lockType),c.finalize();let m=l.int32();return l.done(),m===0}}}lock(a){return this.invokeWorker("lockFile",{name:this.getStoreName(),lockType:a})}unlock(a){return this.invokeWorker("unlockFile",{name:this.getStoreName(),lockType:a})}delete(){(this.reader||this.writer)&&this.close();let a=globalThis.indexedDB.deleteDatabase(this.getStoreName());a.onerror=()=>{console.warn(`Deleting ${this.filename} database failed`)},a.onsuccess=()=>{}}open(){let a=new SharedArrayBuffer(36864);this.writer=new fr(a,{name:"args (backend)",debug:!1});let f=new SharedArrayBuffer(4096*9);this.reader=new lr(f,{name:"results",debug:!1}),cr(this.reader,this.writer)}close(){this.invokeWorker("closeFile",{name:this.getStoreName()}),this.reader=null,this.writer=null,this.worker=null}readMeta(){return this.invokeWorker("readMeta",{name:this.getStoreName()})}writeMeta(a){return this.invokeWorker("writeMeta",{name:this.getStoreName(),meta:a})}readBlocks(a,f){return this.stats&&(this.stats.read+=a.length),this.invokeWorker("readBlocks",{name:this.getStoreName(),positions:a,blockSize:f})}writeBlocks(a,f){return this.stats&&(this.stats.writes+=a.length),this.invokeWorker("writeBlocks",{name:this.getStoreName(),writes:a,blockSize:f})}}function dr(){if(!(!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent))||!indexedDB.databases)return Promise.resolve();let a;return new Promise(f=>{const l=()=>indexedDB.databases().finally(f);a=setInterval(l,100),l()}).finally(()=>clearInterval(a))}function At(p,a){return Math.round(p/a)}async function pr(p){return await dr(),new Promise((a,f)=>{let l=globalThis.indexedDB.open(p,2);l.onsuccess=c=>{let m=c.target.result;m.onversionchange=()=>{console.log("closing because version changed"),m.close()},m.onclose=()=>{},a(m)},l.onupgradeneeded=c=>{let m=c.target.result;m.objectStoreNames.contains("data")||m.createObjectStore("data")},l.onblocked=c=>console.log("blocked",c),l.onerror=l.onabort=c=>f(c.target.error)})}class mr{constructor(a,f){this.dbName=a,this._openDb=null,this.hasAlertedFailure=!1,this.onFallbackFailure=f}async getDb(){return this._openDb?this._openDb:(this._openDb=await pr(this.dbName),this._openDb)}closeDb(){this._openDb&&(this._openDb.close(),this._openDb=null)}async readAll(){let a=await this.getDb(this.dbName),f=new Map,c=a.transaction(["data"],"readonly").objectStore("data");return new Promise((m,g)=>{let E=c.openCursor(IDBKeyRange.lowerBound(-1));E.onerror=g,E.onsuccess=i=>{let R=i.target.result;R?(f.set(R.key,R.value),R.continue()):m(f)}})}async write(a,f,l){let m=(await this.getDb(this.dbName)).transaction(["data"],"readwrite"),g=m.objectStore("data");await new Promise((E,i)=>{let R=g.get(0);R.onsuccess=O=>{if(l&&!ir(R.result,f)){this.onFallbackFailure&&!this.hasAlertedFailure&&(this.hasAlertedFailure=!0,this.onFallbackFailure()),i(new Error("Fallback mode unable to write file changes"));return}for(let F of a)g.put(F.value,F.key);m.onsuccess=()=>E(),m.onerror=()=>i()},R.onerror=i})}}class wr{constructor(a,f){this.filename=a,this.dbName=this.filename.replace(/\//g,"-"),this.cachedFirstBlock=null,this.writeQueue=null,this.blocks=new Map,this.lockType=0,this.transferBlockOwnership=!1,this.persistance=new mr(this.dbName,f)}async readIfFallback(){return this.transferBlockOwnership=!0,this.blocks=await this.persistance.readAll(),this.readMeta()}lock(a){return this.cachedFirstBlock=this.blocks.get(0),this.lockType=a,!0}unlock(a){return this.lockType>Se.SHARED&&a===Se.SHARED&&this.flush(),this.lockType=a,!0}delete(){let a=globalThis.indexedDB.deleteDatabase(this.dbName);a.onerror=()=>{console.warn(`Deleting ${this.filename} database failed`)},a.onsuccess=()=>{}}open(){this.writeQueue=[],this.lockType=0}close(){this.flush(),this.transferBlockOwnership?this.transferBlockOwnership=!1:this.blocks=new Map,this.persistance.closeDb()}readMeta(){let a=this.blocks.get(-1);if(a){let f=this.blocks.get(0);return{size:a.size,blockSize:Ze(new Uint8Array(f))}}return null}writeMeta(a){this.blocks.set(-1,a),this.queueWrite(-1,a)}readBlocks(a,f){let l=[];for(let c of a)l.push({pos:c,data:this.blocks.get(At(c,f))});return l}writeBlocks(a,f){for(let l of a){let c=At(l.pos,f);this.blocks.set(c,l.data),this.queueWrite(c,l.data)}this.lockType<=Se.SHARED&&this.flush()}queueWrite(a,f){this.writeQueue.push({key:a,value:f})}flush(){this.writeQueue.length>0&&(this.persistance.write(this.writeQueue,this.cachedFirstBlock,this.lockType>Se.SHARED),this.writeQueue=[]),this.cachedFirstBlock=null}}class br{constructor(a){this.onFallbackFailure=a}createFile(a){let f;typeof SharedArrayBuffer<"u"?f=new hr(a):f=new wr(a,this.onFallbackFailure);let l=new ur(a,f);return{}.PERF_BUILD&&(this._files==null&&(this._files=new Set),this._files.add(l)),l}startProfile(){for(let a of this._files)if(a.ops.writer){let f=a.ops.writer,l=a.ops.reader;f.string("profile-start"),f.finalize(),l.int32(),l.done()}}stopProfile(){for(let a of this._files)if(a.ops.writer){let f=a.ops.writer,l=a.ops.reader;f.string("profile-stop"),f.finalize(),l.int32(),l.done()}}}const yr=(p,a,f,l)=>{switch(a){case"startsWith":return`${p} LIKE '${f}%'`;case"contains":return`${p} LIKE '%${f}%'`;case"notContains":return`${p} NOT LIKE '%${f}%'`;case"endsWith":return`${p} LIKE '%${f}'`;case"equals":return`${p} = '${f}'`;case"notEquals":return`${p} <> '${f}'`;case"in":const c=f.map(m=>`'${m}'`).join(", ");return`${p} IN (${c})`;case"lt":return`${p} < '${f}'`;case"lte":return`${p} <= '${f}'`;case"gt":return`${p} > '${f}'`;case"gte":return`${p} >= '${f}'`;case"between":return`${p} BETWEEN '${f}' AND '${l}'`;case"dateIs":case"dateIsNot":case"dateBefore":case"dateAfter":if(a==="dateIs")return`${p} = ${f}`;if(a==="dateIsNot")return`${p} <> ${f}`;if(a==="dateBefore")return`${p} < ${f}`;if(a==="dateAfter")return`${p} > ${f}`;break;default:return""}},gr=(p,a)=>`${p} ${a}`;let qe,te,Ke;const Ge="test10";let St=null;const Be=new Promise(p=>St=p),_r=async()=>{te=await rr({locateFile:a=>a}),Ke=new or(te.FS,new br),te.register_for_idb(Ke),te.FS.mkdir("/sql"),te.FS.mount(Ke,{},"/sql");const p="/sql/db.sqlite";if(typeof SharedArrayBuffer>"u"){let a=te.FS.open(p,"a+");await a.node.contents.readIfFallback(),te.FS.close(a)}qe=new te.Database(p,{filename:!0}),qe.exec(`
    PRAGMA journal_mode=MEMORY;
    PRAGMA synchronous=OFF;
    PRAGMA page_size=32768;
    PRAGMA cache_size=32000;
    PRAGMA temp_store=MEMORY;
  `),St()},le=[],De=[];let be="";const Er=3e5,qt={DELETE_TABLE:async()=>{await Be,qe.exec(`DROP TABLE ${Ge}`),postMessage({type:"DELETE_TABLE"})},CREATE_TABLE:async()=>{await Be;try{const p=`
    orderId TEXT,
    reueqstDate TEXT, 
    requestBankCode TEXT,
    requestBankName TEXT,
    item TEXT,
    authorizeStoreCode TEXT,
    authorizeBankCode TEXT,
    authorizeBankName TEXT,
    customerId TEXT,
    saleNo TEXT,
    carrierType TEXT,
    isEInvoice TEXT,
    virtualBankAccount INTEGER,
    shippingMethod TEXT,
    shippingType TEXT,
    receiver TEXT,
    taxAmount INTEGER,
    invoiceAmount INTEGER,
    virtualCurrencyAmount INTEGER,
    createOrderAPSource TEXT,
    orderSubSource TEXT,
    remark TEXT,
    mobile TEXT,
    sellingPrice INTEGER,
    paymentId TEXT,
    createdUser TEXT,
    couponNo TEXT,
    message TEXT,
    creditCardNo TEXT,
    installmentNo TEXT,
    paymentStatus TEXT,
    authorizeCode TEXT,
    lastThreeDigital TEXT`;qe.exec(`CREATE TABLE ${Ge} (${p})`)}catch(p){console.log(p)}postMessage({type:"CREATE_TABLE"})},PROGRESS:p=>{be+=new TextDecoder().decode(p);let a=be.indexOf(`
`);for(;~a;){const f=be.slice(0,a);le.push(f),be=be.slice(a+1),a=be.indexOf(`
`)}le.length>Er&&([].concat(le).map(l=>De.push(JSON.parse(l))),le.length=0)},END:async()=>{le.length&&(le.map(p=>De.push(JSON.parse(p))),le.length=0),De.map(p=>(p.reueqstDate=new Date(p.reueqstDate),p)),console.time("INSERT"),console.timeEnd("INSERT"),postMessage({type:"SQLITE_READY",count:De.length})},CMD:async p=>{await Be,console.log(p);try{const a=qe[p.action](p.sql);postMessage({type:"CMD",result:{...a},meta:p.meta??{}})}finally{postMessage({type:"ERROR"})}},QUERY:async p=>{await Be,p=p||{};let a="",f="";if(p.filters){const E=" AND";Object.entries(p.filters).forEach(([i,R])=>{let{value:O,matchMode:F}=R;O=((x,P)=>(x==="reueqstDate"&&(P=Number(new Date(Number(P)))),P))(i,O),a+=yr(i,F,O)+`${E}`}),a&&(a="WHERE "+a.split(`${E}`).filter(Boolean).join(`${E} `))}p.sort&&(Object.entries(p.sort).forEach(([E,i])=>{f+=gr(E,i)+","}),f="ORDER BY "+f.split(",").filter(Boolean).join(","));const l={page:1,size:1e7},c=(l.page-1)*l.size,m=`SELECT * FROM ${Ge} ${f} ${a} LIMIT ${l.size} OFFSET ${c}`;console.log(m),console.time("QUERY");const g=De;for(const E of g)E.reueqstDate=new Date(Number(E.reueqstDate));postMessage({type:"QUERY",statment:m,results:[...g],page:{...l}}),console.timeEnd("QUERY")}};addEventListener("message",async function(p){console.time("WORKER"),console.log(`Worker Receive data type: ${p.data.type}`),p.data.type?qt[p.data.type](p.data.queryArgs):qt.PROGRESS(p.data),console.timeEnd("WORKER")}),_r()})();
